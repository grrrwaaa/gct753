!function e(t,i,n){function r(a,o){if(!i[a]){if(!t[a]){var h="function"==typeof require&&require;if(!o&&h)return h(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=i[a]={exports:{}};t[a][0].call(u.exports,function(e){var i=t[a][1][e];return r(i?i:e)},u,u.exports,e,t,i,n)}return i[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(e){ndarray=e("ndarray"),zeros=e("zeros");var t=(e("seedrandom"),new Math.seedrandom);random=function(e){return e?Math.floor(t()*e):t()},wrap=function(e,t){return(e%t+t)%t},al={};var n=!1,r=Date.now(),s=1/60;al.once=function(){update&&"function"==typeof update&&update(s),draw&&"function"==typeof draw&&draw()};var a=function(){var e=Date.now();s=.001*(e-r),r=e,n&&(al.once(),requestAnimationFrame(a))};al.start=function(){r=Date.now(),n=!0,a()},al.stop=function(){n=!1};var o,h,u,c,l,f;al.init=function(){o=document.createElement("canvas"),o.setAttribute("width",512),o.setAttribute("height",256),document.body.appendChild(o),h=o.getContext("2d"),u=document.createElement("canvas"),u.width=o.width,u.height=o.height,c=u.getContext("2d"),l=c.getImageData(0,0,u.width,u.height),f=l.data;var e=document.createElement("button");e.innerHTML="start",e.onclick=function(){return al.start(),!1},document.body.appendChild(e);var e=document.createElement("button");e.innerHTML="stop",e.onclick=function(){return al.stop(),!1},document.body.appendChild(e);var e=document.createElement("button");e.innerHTML="once",e.onclick=function(){return al.once(),!1},document.body.appendChild(e);var e=document.createElement("button");e.innerHTML="reset",e.onclick=function(){return reset(),draw(),!1},document.body.appendChild(e)},field2D=function(e,t){this.dim=[e,t],this.width=e,this.height=t,this.data=zeros(this.dim)},field2D.prototype.draw=function(){var e,t,i=0,n=u.width,r=u.height,s=this.data.shape[0],a=this.data.shape[1],b=s/n,p=a/r;for(t=0;r>t;t++){var d=Math.floor(t*p);for(e=0;n>e;e++,i+=4){var g=Math.floor(e*b),y=255*this.data.get(g,d);f[i]=y,f[i+1]=y,f[i+2]=y,f[i+3]=255}}c.putImageData(l,0,0),h.drawImage(u,0,0,u.width,u.height,0,0,o.width,o.height)},field2D.prototype.set=function(e,t,n){if(null!=t&&null!=n)if(t=wrap(t,this.width),n=wrap(n,this.height),"function"==typeof e){var r=e(t,n);null!=r&&this.data.set(i,j,r)}else this.data.set(t,n,e);else{var s=this.data,a=this.width,o=this.height;if("function"==typeof e)for(var n=0;o>n;++n)for(var t=0;a>t;++t){var r=e(t,n);null!=r&&s.set(t,n,r)}else for(var n=0;o>n;++n)for(var t=0;a>t;++t)s.set(t,n,e)}},field2D.prototype.get=function(e,t){return e=wrap(e,this.width),t=wrap(t,this.height),this.data.get(e,t)}},{ndarray:3,seedrandom:5,zeros:6}],2:[function(require,module,exports){function createInput(){navigator.webkitGetUserMedia({audio:!0},function(e){console.log("CONNECTING INPUT"),Gibberish.mediaStreamSource=Gibberish.context.createMediaStreamSource(e),Gibberish.mediaStreamSource.connect(Gibberish.node),_hasInput=!0})}Gibberish={memo:{},codeblock:[],analysisCodeblock:[],analysisUgens:[],dirtied:[],id:0,isDirty:!1,out:null,debug:!1,callback:"",audioFiles:{},sequencers:[],callbackArgs:["input"],callbackObjects:[],analysisCallbackArgs:[],analysisCallbackObjects:[],createCallback:function(){this.memo={},this.codeblock.length=0,this.callbackArgs.length=0,this.callbackObjects.length=0,this.analysisCallbackArgs.length=0,this.dirtied.length=0,this.codestring="Gibberish.callback = function(input,",this.memo={},this.out.codegen();var e=this.codeblock.slice(0);if(this.analysisUgens.length>0){this.analysisCodeblock.length=0;for(var t=0;t<this.analysisUgens.length;t++)this.analysisCallbackArgs.push(this.analysisUgens[t].analysisSymbol)}for(var t=0;t<this.callbackArgs.length;t++)this.codestring+=this.callbackArgs[t],t<this.callbackArgs.length-1&&(this.codestring+=", ");for(var t=0;t<this.analysisCallbackArgs.length;t++)this.codestring+=", ",this.codestring+=this.analysisCallbackArgs[t];if(this.codestring+="){\n	",this.codestring+=e.join("	"),this.codestring+="\n	",this.analysisUgens.length>0){this.analysisCodeblock.length=0;for(var t=0;t<this.analysisUgens.length;t++)this.codeblock.length=0,this.analysisUgens[t].analysisCodegen();this.codestring+=this.analysisCodeblock.join("\n	"),this.codestring+="\n	"}return this.codestring+="return "+this.out.variable+";\n",this.codestring+="}",this.callbackString=this.codestring,this.debug&&console.log(this.callbackString),this.codestring},audioProcess:function(e){var bufferL=e.outputBuffer.getChannelData(0),bufferR=e.outputBuffer.getChannelData(1),input=e.inputBuffer.getChannelData(0),me=Gibberish,callback=me.callback,sequencers=me.sequencers,out=Gibberish.out.callback,objs=me.callbackObjects.slice(0),_callback;objs.unshift(0);for(var i=0,_bl=e.outputBuffer.length;_bl>i;i++){for(var j=0;j<sequencers.length;j++)sequencers[j].tick();if(me.isDirty){_callback=me.createCallback();try{callback=eval(_callback)}catch(e){console.error("ERROR WITH CALLBACK : \n\n",_callback)}me.isDirty=!1,objs=me.callbackObjects.slice(0),objs.unshift(0)}objs[0]=input[i],val=callback.apply(null,objs),bufferL[i]=val[0],bufferR[i]=val[1]}},audioProcessFirefox:function(soundData){var me=Gibberish,callback=me.callback,sequencers=me.sequencers,objs=me.callbackObjects.slice(0);objs.unshift(0);for(var i=0,size=soundData.length;size>i;i+=2){for(var j=0;j<sequencers.length;j++)sequencers[j].tick();if(me.isDirty){callback=me.createCallback();try{callback=eval(callback)}catch(e){console.error("ERROR WITH CALLBACK : \n\n",callback)}me.isDirty=!1,objs=me.callbackObjects.slice(0),objs.unshift(0)}var val=callback.apply(null,objs);soundData[i]=val[0],soundData[i+1]=val[1]}},clear:function(){this.out.inputs.length=0,this.analysisUgens.length=0,this.sequencers.length=0,this.callbackArgs.length=2,this.callbackObjects.length=1,Gibberish.dirty(this.out)},dirty:function(e){if("undefined"!=typeof e){for(var t=!1,i=0;i<this.dirtied.length;i++)this.dirtied[i].variable===e.variable&&(t=!0);t||(this.isDirty=!0,this.dirtied.push(e))}else this.isDirty=!0},generateSymbol:function(e){return e+"_"+this.id++},AudioDataDestination:function(e,t){var i=new Audio;i.mozSetup(2,e);var n,r=0,s=e/2,a=null;setInterval(function(){var e;if(a){if(e=i.mozWriteAudio(a.subarray(n)),r+=e,n+=e,n<a.length)return;a=null}var o=i.mozCurrentSampleOffset(),h=o+s-r;if(h>0){var u=new Float32Array(h);t(u),e=i.mozWriteAudio(u),o=i.mozCurrentSampleOffset(),e<u.length&&(a=u,n=e),r+=e}},100)},init:function(){Gibberish.out=new Gibberish.Bus2,Gibberish.out.codegen(),Gibberish.dirty(Gibberish.out);var e,t="undefined"==typeof arguments[0]?1024:arguments[0];return"undefined"!=typeof webkitAudioContext?e=webkitAudioContext:"undefined"!=typeof AudioContext&&(e=AudioContext),start=function(){if("undefined"!=typeof e){if(document.getElementsByTagName("body")[0].removeEventListener("touchstart",start),Gibberish.context=new e,Gibberish.node=Gibberish.context.createScriptProcessor(t,2,2,Gibberish.context.sampleRate),Gibberish.node.onaudioprocess=Gibberish.audioProcess,Gibberish.node.connect(Gibberish.context.destination),"ontouchstart"in document.documentElement){var i=Gibberish.context.createBufferSource();i.connect(Gibberish.context.destination),i.noteOn(0)}}else-1===navigator.userAgent.indexOf("Firefox")?(Gibberish.AudioDataDestination(44100,Gibberish.audioProcessFirefox),Gibberish.context={sampleRate:44100}):alert("Your browser does not support javascript audio synthesis. Please download a modern web browser that is not Internet Explorer.")},"ontouchstart"in document.documentElement?document.getElementsByTagName("body")[0].addEventListener("touchstart",start):start(),this},makePanner:function(){var e=Math.sin,t=Math.cos,i=Math.sqrt(2)/2,n=function(n,r,s){var a="object"==typeof n,o=a?n[0]:n,h=a?n[1]:n;return s[0]=o*i*(t(r)-e(r)),s[1]=h*i*(t(r)+e(r)),s};return n},defineUgenProperty:function(e,t,i){var n=i.properties[e]={value:t,binops:[],parent:i,name:e};Object.defineProperty(i,e,{configurable:!0,get:function(){return n.value},set:function(e){n.value=e,Gibberish.dirty(i)}})},polyInit:function(e){e.mod=e.polyMod,e.removeMod=e.removePolyMod;for(var t in e.polyProperties)!function(t){var i=e.polyProperties[t];Object.defineProperty(e,t,{configurable:!0,get:function(){return i},set:function(n){i=n;for(var r=0;r<e.children.length;r++)e.children[r][t]=i}})}(t)},interpolate:function(e,t){var i=0|t,n=i+1>e.length-1?0:i+1;return frac=t-i,e[i]+frac*(e[n]-e[i])},pushUnique:function(e,t){for(var i=e,n=!0,r=0;r<t.length;r++)if(i===t[r]){n=!1;break}n&&t.push(i)},"export":function(e,t){for(var i in Gibberish[e])t[i]=Gibberish[e][i]},ugen:function(){Gibberish.extend(this,{processProperties:function(){if("object"!=typeof arguments[0][0]||"undefined"!=typeof arguments[0][0].type||Array.isArray(arguments[0][0])||"op"===arguments[0][0].name){var e=0;for(var t in this.properties)"object"==typeof this.properties[t]&&"undefined"!=typeof this.properties[t].binops?"undefined"!=typeof arguments[0][e]&&(this.properties[t].value=arguments[0][e++]):"undefined"!=typeof arguments[0][e]&&(this.properties[t]=arguments[0][e++])}else{var i=arguments[0][0];for(var t in i)"undefined"!=typeof i[t]&&("object"==typeof this.properties[t]&&"undefined"!=typeof this.properties[t].binops?this.properties[t].value=i[t]:this[t]=i[t])}return this},codegen:function(){var e="",t=null;if(Gibberish.memo[this.symbol])return Gibberish.memo[this.symbol];t=this.variable?this.variable:Gibberish.generateSymbol("v"),Gibberish.memo[this.symbol]=t,this.variable=t,e+="var "+t+" = "+this.symbol+"(";for(var i in this.properties){var n=this.properties[i],r="";if(Array.isArray(n.value)){0===n.value.length&&(r=0);for(var s=0;s<n.value.length;s++){var a=n.value[s];r+="object"==typeof a?null!==a?a.codegen():"null":"function"==typeof n.value?n.value():n.value,r+=s<n.value.length-1?", ":""}}else"object"==typeof n.value?null!==n.value&&(r=n.value.codegen?n.value.codegen():n.value):"undefined"!==n.name&&(r="function"==typeof n.value?n.value():n.value);if(0!=n.binops.length){for(var o=0;o<n.binops.length;o++)e+="(";for(var h=0;h<n.binops.length;h++){var u,c=n.binops[h];u="number"==typeof c.ugen?c.ugen:null!==c.ugen?c.ugen.codegen():"null","="===c.binop?(e=e.replace(r,""),e+=u):"++"===c.binop?e+=" + Math.abs("+u+")":(0===h&&(e+=r),e+=" "+c.binop+" "+u+")")}}else e+=r;e+=", "}return" "===e.charAt(e.length-1)&&(e=e.slice(0,-2)),e+=");\n",this.codeblock=e,-1===Gibberish.codeblock.indexOf(this.codeblock)&&Gibberish.codeblock.push(this.codeblock),-1===Gibberish.callbackArgs.indexOf(this.symbol)&&"op"!==this.name&&Gibberish.callbackArgs.push(this.symbol),-1===Gibberish.callbackObjects.indexOf(this.callback)&&"op"!==this.name&&Gibberish.callbackObjects.push(this.callback),this.dirty=!1,t},init:function(){if(this.initalized||(this.symbol=Gibberish.generateSymbol(this.name),this.codeblock=null,this.variable=null),"undefined"==typeof this.properties&&(this.properties={}),!this.initialized){this.destinations=[];for(var e in this.properties)Gibberish.defineUgenProperty(e,this.properties[e],this)}if(arguments.length>0&&"object"==typeof arguments[0][0]&&"undefined"===arguments[0][0].type){var t=arguments[0][0];for(var e in t)this[e]=t[e]}return this.initialized=!0,this},mod:function(e,t,i){var n=this.properties[e],r={ugen:t,binop:i};n.binops.push(r),Gibberish.dirty(this)},removeMod:function(e,t){if("undefined"==typeof t)this.properties[e].binops.length=0;else if("number"==typeof t)this.properties[e].binops.splice(t,1);else if("object"==typeof t)for(var i=0,n=this.properties[e].binops.length;n>i;i++)this.properties[e].binops[i].ugen===t&&this.properties[e].binops.splice(i,1);Gibberish.dirty(this)},polyMod:function(e,t,i){for(var n=0;n<this.children.length;n++)this.children[n].mod(e,t,i);Gibberish.dirty(this)},removePolyMod:function(){var e=Array.prototype.slice.call(arguments,0);if("amp"!==arguments[0]&&"pan"!==arguments[0])for(var t=0;t<this.children.length;t++)this.children[t].removeMod.apply(this.children[t],e);else this.removeMod.apply(this,e);Gibberish.dirty(this)},smooth:function(e){var t=new Gibberish.OnePole;this.mod(e,t,"=")},connect:function(e){return"undefined"==typeof e&&(e=Gibberish.out),-1===this.destinations.indexOf(e)&&(e.addConnection(this,1),this.destinations.push(e)),this},send:function(e,t){return-1===this.destinations.indexOf(e)?(e.addConnection(this,t),this.destinations.push(e)):e.adjustSendAmount(this,t),this},disconnect:function(e){var t;if(e)t=this.destinations.indexOf(e),t>-1&&this.destinations.splice(t,1),e.removeConnection(this);else{for(var i=0;i<this.destinations.length;i++)this.destinations[i].removeConnection(this);this.destinations=[]}return Gibberish.dirty(this),this}})}},Array2=function(){this.length=0},Array2.prototype=[],Array2.prototype.remove=function(e,t){if(t="undefined"==typeof t?!0:t,"undefined"==typeof e){for(var i=0;i<this.length;i++)delete this[i];this.length=0}else if("number"==typeof e)this.splice(e,1);else if("string"==typeof e){for(var n=[],i=0;i<this.length;i++){var r=this[i];if(r.type===e||r.name===e){if(!t)return void this.splice(i,1);n.push(i)}}for(var i=0;i<n.length;i++)this.splice(n[i],1)}else if("object"==typeof e)for(var s=this.indexOf(e);s>-1;)this.splice(s,1),s=this.indexOf(e);this.parent&&Gibberish.dirty(this.parent)},Array2.prototype.get=function(e){if("number"==typeof e)return this[e];if("string"==typeof e)for(var t=0;t<this.length;t++){var i=this[t];if(i.name===e)return i}else if("object"==typeof e){var n=this.indexOf(e);if(n>-1)return this[n]}return null},Array2.prototype.replace=function(e,t){if(t.parent=this,t.input=e.input,"number"!=typeof e){var i=this.indexOf(e);i>-1&&this.splice(i,1,t)}else this.splice(e,1,t);this.parent&&Gibberish.dirty(this.parent)},Array2.prototype.insert=function(e,t){if(e.parent=this,this.input=this.parent,Array.isArray(e))for(var i=0;i<e.length;i++)this.splice(t+i,0,e[i]);else this.splice(t,0,e);this.parent&&Gibberish.dirty(this.parent)},Array2.prototype.add=function(){for(var e=0;e<arguments.length;e++)arguments[e].parent=this,arguments[e].input=this.parent,this.push(arguments[e]);this.parent&&(console.log("DIRTYING"),Gibberish.dirty(this.parent))};var rnd=Math.random;Gibberish.rndf=function(e,t,i,n){if(n="undefined"==typeof n?!0:n,"undefined"==typeof i&&"object"!=typeof e){1==arguments.length?(e=0,t=arguments[0]):2==arguments.length?(e=arguments[0],t=arguments[1]):(e=0,t=1);var r=t-e,s=Math.random(),a=r*s;return e+a}var o=[],h=[];"undefined"==typeof i&&(i=t||e.length);for(var u=0;i>u;u++){var c;if("object"==typeof arguments[0])c=arguments[0][rndi(0,arguments[0].length-1)];else if(n)c=Gibberish.rndf(e,t);else{for(c=Gibberish.rndf(e,t);h.indexOf(c)>-1;)c=Gibberish.rndf(e,t);h.push(c)}o.push(c)}return o},Gibberish.Rndf=function(){var e,t,i,n,r=Math.random;return Math.round,0===arguments.length?(e=0,t=1):1===arguments.length?(e=0,t=arguments[0]):2===arguments.length?(e=arguments[0],t=arguments[1]):(e=arguments[0],t=arguments[1],i=arguments[2]),n=t-e,function(){var t;if("undefined"==typeof i)t=e+r()*n;else{t=[];for(var s=0;i>s;s++)t.push(e+r()*n)}return t}},Gibberish.rndi=function(e,t,i,n){var r;if(0===arguments.length?(e=0,t=1):1===arguments.length?(e=0,t=arguments[0]):(e=arguments[0],t=arguments[1]),"undefined"==typeof i)return r=t-e,Math.round(e+Math.random()*r);for(var s=[],a=[],o=0;i>o;o++){var h;if(n)h=Gibberish.rndi(e,t);else{for(h=Gibberish.rndi(e,t);a.indexOf(h)>-1;)h=Gibberish.rndi(e,t);a.push(h)}s.push(h)}return s},Gibberish.Rndi=function(){var e,t,i,n,r=Math.random,s=Math.round;return 0===arguments.length?(e=0,t=1):1===arguments.length?(e=0,t=arguments[0]):2===arguments.length?(e=arguments[0],t=arguments[1]):(e=arguments[0],t=arguments[1],i=arguments[2]),n=t-e,function(){var t;if("undefined"==typeof i)t=s(e+r()*n);else{t=[];for(var a=0;i>a;a++)t.push(s(e+r()*n))}return t}},Gibberish.extend=function(e,t){for(var i in t)i.split("."),t[i]instanceof Array&&t[i].length<100?(e[i]=t[i].slice(0),"fx"===i&&(e[i].parent=t[i].parent)):"object"!=typeof t[i]||null===t[i]||t[i]instanceof Float32Array?e[i]=t[i]:(e[i]=e[i]||{},arguments.callee(e[i],t[i]));return e},Function.prototype.clone=function(){return eval("["+this.toString()+"]")[0]},String.prototype.format=function(e,t,i){function n(){var n=this,r=arguments.length+1;for(e=0;r>e;i=arguments[e++])t=i,n=n.replace(RegExp("\\{"+(e-1)+"\\}","g"),t);return n}return n.native=String.prototype.format,n}(),Gibberish.future=function(e,t){var i=new Gibberish.Sequencer({values:[function(){},function(){e(),i.stop(),i.disconnect()}],durations:[t]}).start()},Gibberish.Proxy=function(){var e=0;Gibberish.extend(this,{name:"proxy",type:"effect",properties:{},callback:function(){return e}}).init(),this.input=arguments[0],e=this.input.parent[this.input.name],delete this.input.parent[this.input.name],this.input.parent.properties[this.input.name].value=this,Object.defineProperty(this.input.parent,this.input.name,{get:function(){return e},set:function(t){e=t}}),Gibberish.dirty(this.input.parent)},Gibberish.Proxy.prototype=new Gibberish.ugen,Gibberish.Proxy2=function(){var e=arguments[0],t=arguments[1];Gibberish.extend(this,{name:"proxy2",type:"effect",properties:{},callback:function(){var i=e[t];return Array.isArray(i)?(i[0]+i[1]+i[2])/3:i}}).init(),this.getInput=function(){return e},this.setInput=function(t){e=t},this.getName=function(){return t},this.setName=function(e){t=e}},Gibberish.Proxy2.prototype=new Gibberish.ugen,Gibberish.Proxy3=function(){var e=arguments[0],t=arguments[1];Gibberish.extend(this,{name:"proxy3",type:"effect",properties:{},callback:function(){var i=e[t];return i||0}}),this.init(),this.codegen=function(){console.log(" CALLED "),this.variable||(this.variable=Gibberish.generateSymbol("v")),Gibberish.callbackArgs.push(this.symbol),Gibberish.callbackObjects.push(this.callback),this.codeblock="var "+this.variable+" = "+this.symbol+"("+e.properties[t].codegen()+");\n"}},Gibberish.Proxy3.prototype=new Gibberish.ugen,Gibberish.oscillator=function(){this.type="oscillator",this.oscillatorInit=function(){return this.fx=new Array2,this.fx.parent=this,this}},Gibberish.oscillator.prototype=new Gibberish.ugen,Gibberish._oscillator=new Gibberish.oscillator,Gibberish.Wavetable=function(){var e=0,t=null,i=Gibberish.context.sampleRate/1024;this.properties={frequency:440,amp:.25},this.getTable=function(){return t},this.setTable=function(e){t=e,i=Gibberish.context.sampleRate/t.length},this.getTableFreq=function(){return i},this.setTableFreq=function(e){i=e},this.getPhase=function(){return e},this.setPhase=function(t){e=t},this.callback=function(n,r){var s,a,o,h,u;for(e+=n/i;e>=1024;)e-=1024;return s=0|e,a=e-s,s=1023&s,o=1023===s?0:s+1,h=t[s],u=t[o],(h+a*(u-h))*r}},Gibberish.Wavetable.prototype=Gibberish._oscillator,Gibberish.Table=function(e){this.__proto__=new Gibberish.Wavetable,this.name="table";var t=2*Math.PI;if("undefined"==typeof e){e=new Float32Array(1024);for(var i=1024;i--;)e[i]=Math.sin(i/1024*t)}this.setTable(e),this.init(),this.oscillatorInit()},Gibberish.asmSine=function(e,t,i){"use asm";function n(){for(var e=1024,t=1024;e=e-1|0;)t-=1,h[e>>2]=+a(+(t/1024)*6.2848);c=44100/1024}function r(e,t,i){e=+e,t=+t,i=+i;var n=0,r=0,s=0,a=0,l=0,f=0;return o=+(o+e/c),o>=1024&&(o=+(o-1024)),n=+u(o),a=o-n,r=~~n,s=(r|0)==1024?0:r+1|0,l=+h[r>>2],f=+h[s>>2],+((l+a*(f-l))*t)}function s(e){return e|=0,+h[e>>2]}var a=e.Math.sin,o=0,h=new e.Float32Array(i),u=e.Math.floor,c=0;return{init:n,gen:r,get:s}},Gibberish.asmSine2=function(){this.properties={frequency:440,amp:.5,sr:Gibberish.context.sampleRate},this.name="sine";var e=new ArrayBuffer(4096),t=Gibberish.asmSine(window,null,e);return t.init(),this.getTable=function(){return e},this.get=t.get,this.callback=t.gen,this.init(),this.oscillatorInit(),this.processProperties(arguments),this},Gibberish.asmSine2.prototype=Gibberish._oscillator,Gibberish.Sine=function(){this.__proto__=new Gibberish.Wavetable,this.name="sine";for(var e=2*Math.PI,t=new Float32Array(1024),i=1024;i--;)t[i]=Math.sin(i/1024*e);this.setTable(t),this.init(arguments),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.Sine2=function(){this.__proto__=new Gibberish.Sine,this.name="sine2";var e=this.__proto__.callback,t=Gibberish.makePanner(),i=[0,0];this.callback=function(n,r,s){var a=e(n,r);return i=t(a,s,i)},this.init(),this.oscillatorInit(),Gibberish.defineUgenProperty("pan",0,this),this.processProperties(arguments)},Gibberish.Square=function(){this.__proto__=new Gibberish.Wavetable,this.name="square";for(var e=(2*Math.PI,new Float32Array(1024)),t=1024;t--;)e[t]=t/1024>.5?1:-1;this.setTable(e),this.init(arguments),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.Saw=function(){this.__proto__=new Gibberish.Wavetable,this.name="saw";for(var e=new Float32Array(1024),t=1024;t--;)e[t]=4*((t/1024/2+.25)%.5-.25);this.setTable(e),this.init(arguments),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.Saw2=function(){this.__proto__=new Gibberish.Saw,this.name="saw2";var e=this.__proto__.callback,t=Gibberish.makePanner(),i=[0,0];this.callback=function(n,r,s){var a=e(n,r);return i=t(a,s,i)},this.init(),Gibberish.defineUgenProperty("pan",0,this)},Gibberish.Triangle=function(){this.__proto__=new Gibberish.Wavetable,this.name="triangle";for(var e=new Float32Array(1024),t=Math.abs,i=1024;i--;)e[i]=1-4*t((i/1024+.25)%1-.5);this.setTable(e),this.init(arguments),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.Triangle2=function(){this.__proto__=new Gibberish.Triangle,this.name="triangle2";var e=this.__proto__.callback,t=Gibberish.makePanner(),i=[0,0];this.callback=function(n,r,s){var a=e(n,r);return t(a,s,i)},this.init(),this.oscillatorInit(),Gibberish.defineUgenProperty("pan",0,this),this.processProperties(arguments)},Gibberish.Saw3=function(){var e=0,t=0,i=2.5,n=-1.5,r=0,s=Math.sin,a=11;pi_2=2*Math.PI,sr=Gibberish.context.sampleRate,Gibberish.extend(this,{name:"saw",properties:{frequency:440,amp:.15,sr:Gibberish.context.sampleRate},callback:function(o){var h=o/sr,u=.5-h,c=a*u*u*u*u,l=.376-.752*h,f=1-2*h,b=0;return t+=h,t-=t>1?2:0,e=.5*(e+s(pi_2*(t+e*c))),b=i*e+n*r,r=e,b+=l,b*f}}),Object.defineProperty(this,"scale",{get:function(){return a},set:function(e){a=e}}),this.init(),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.Saw3.prototype=Gibberish._oscillator,Gibberish.PWM=function(){var e=0,t=0,i=0,n=0,r=0,s=2.5,a=-1.5,o=Math.sin,h=11;pi_2=2*Math.PI,test=0,sr=Gibberish.context.sampleRate,Gibberish.extend(this,{name:"pwm",properties:{frequency:440,amp:.15,pulsewidth:.05,sr:Gibberish.context.sampleRate},callback:function(u,c,l){var f=u/sr,b=.5-f,p=h*b*b*b*b,d=1-2*f,g=0;return r+=f,r-=r>1?2:0,e=.5*(e+o(pi_2*(r+e*p))),t=.5*(t+o(pi_2*(r+t*p+l))),g=t-e,g=s*g+a*(i-n),i=e,n=t,g*d*c}}),Object.defineProperty(this,"scale",{get:function(){return h},set:function(e){h=e}}),this.init(),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.PWM.prototype=Gibberish._oscillator,Gibberish.Noise=function(){var e=Math.random;Gibberish.extend(this,{name:"noise",properties:{amp:1},callback:function(t){return(2*e()-1)*t}}),this.init(),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.Noise.prototype=Gibberish._oscillator,Gibberish.KarplusStrong=function(){var e=[0],t=0,i=Math.random,n=Gibberish.makePanner(),r=Gibberish.context.sampleRate,s=[0,0];Gibberish.extend(this,{name:"karplus_strong",frequency:0,properties:{blend:1,damping:0,amp:1,channels:2,pan:0},note:function(t){var n=Math.floor(r/t);e.length=0;for(var s=0;n>s;s++)e[s]=2*i()-1;this.frequency=t},callback:function(r,a,o,h,u){var c=e.shift(),l=i()>r?-1:1;a=a>0?a:0;var f=l*(c+t)*(.5-a/100);return t=f,e.push(f),f*=o,1===h?f:n(f,u,s)}}).init().oscillatorInit().processProperties(arguments)},Gibberish.KarplusStrong.prototype=Gibberish._oscillator,Gibberish.PolyKarplusStrong=function(){this.__proto__=new Gibberish.Bus2,Gibberish.extend(this,{name:"poly_karplus_strong",maxVoices:5,voiceCount:0,polyProperties:{blend:1,damping:0},note:function(e,t){var i=this.children[this.voiceCount++];this.voiceCount>=this.maxVoices&&(this.voiceCount=0),i.note(e,t)}}),this.amp=1/this.maxVoices,Gibberish.polyInit(this),this.children=[],"object"==typeof arguments[0]&&(this.maxVoices=arguments[0].maxVoices?arguments[0].maxVoices:this.maxVoices);for(var e=0;e<this.maxVoices;e++){var t={blend:this.blend,damping:this.damping,channels:2,amp:1},i=new Gibberish.KarplusStrong(t).connect(this);this.children.push(i)}this.processProperties(arguments),this.initialized=!1,Gibberish._synth.oscillatorInit.call(this),Gibberish.dirty(this)},Gibberish.bus=function(){this.type="bus",this.inputCodegen=function(){var e=this.value.codegen(),t=1===this.amp?e:e+" * "+this.amp;return this.codeblock=t,t},this.addConnection=function(){var e={value:arguments[0],amp:arguments[1],codegen:this.inputCodegen};this.inputs.push(e),Gibberish.dirty(this)},this.removeConnection=function(e){for(var t=0;t<this.inputs.length;t++)if(this.inputs[t].value===e){this.inputs.splice(t,1),Gibberish.dirty(this);break}},this.adjustSendAmount=function(e,t){for(var i=0;i<this.inputs.length;i++)if(this.inputs[i].value===e){this.inputs[i].amp=t,Gibberish.dirty(this);break}},this.callback=function(){var e=arguments[arguments.length-2],t=arguments[arguments.length-1];output[0]=output[1]=0;for(var i=0;i<arguments.length-2;i++){var n="object"==typeof arguments[i];output[0]+=n?arguments[i][0]:arguments[i],output[1]+=n?arguments[i][1]:arguments[i]}return output[0]*=e,output[1]*=e,panner(output,t,output)}},Gibberish.bus.prototype=new Gibberish.ugen,Gibberish._bus=new Gibberish.bus,Gibberish.Bus=function(){return Gibberish.extend(this,{name:"bus",properties:{inputs:[],amp:1},callback:function(){for(var e=0,t=arguments.length-1,i=arguments[t],n=0;t>n;n++)e+=arguments[n];return e*=i}}),this.init(),this.processProperties(arguments),this},Gibberish.Bus.prototype=Gibberish._bus,Gibberish.Bus2=function(){this.name="bus2",this.type="bus",this.properties={inputs:[],amp:1,pan:0};var e=[0,0],t=Gibberish.makePanner();this.callback=function(){var i=arguments,n=i.length,r=i[n-2],s=i[n-1];e[0]=e[1]=0;for(var a=0,o=n-2;o>a;a++){var h="object"==typeof i[a];e[0]+=h?i[a][0]||0:i[a]||0,e[1]+=h?i[a][1]||0:i[a]||0}return e[0]*=r,e[1]*=r,t(e,s,e)},this.show=function(){console.log(e,args)},this.getOutput=function(){return e},this.getArgs=function(){return args},this.init(arguments),this.processProperties(arguments)},Gibberish.Bus2.prototype=Gibberish._bus,Gibberish.envelope=function(){this.type="envelope"},Gibberish.envelope.prototype=new Gibberish.ugen,Gibberish._envelope=new Gibberish.envelope,Gibberish.ExponentialDecay=function(){var e=Math.pow,t=0,i=0;Gibberish.extend(this,{name:"ExponentialDecay",properties:{decay:.5,length:11050},callback:function(n,r){return t=e(n,i),i+=1/r,t},trigger:function(){i="number"==typeof arguments[0]?arguments[0]:0}}).init()},Gibberish.ExponentialDecay.prototype=Gibberish._envelope,Gibberish.Line=function(e,t,i,n){var r={name:"line",properties:{start:e||0,end:isNaN(t)?1:t,time:i||Gibberish.context.sampleRate,loops:n||!1}},s=0,a=(t-e)/i;return this.callback=function(e,t,i,n){var r=i>s?e+s++*a:t;return s=r>=t&&n?0:s,r},Gibberish.extend(this,r),this.init(),this},Gibberish.Line.prototype=Gibberish._envelope,Gibberish.AD=function(e,t){var i=0,n=0;Gibberish.extend(this,{name:"AD",properties:{attack:e||1e4,decay:t||1e4},run:function(){return n=0,i=0,this},callback:function(e,t){if(e=0>e?22050:e,t=0>t?22050:t,0===n){var r=1/e;i+=r,i>=1&&n++}else if(1===n){var r=1/t;i-=r,0>=i&&(i=0,n++)}return i},getState:function(){return n}}).init().processProperties(arguments)},Gibberish.AD.prototype=Gibberish._envelope,Gibberish.ADSR=function(e,t,i,n,r,s,a){var o={name:"adsr",type:"envelope",requireReleaseTrigger:"undefined"!=typeof a?a:!1,properties:{attack:isNaN(e)?1e4:e,decay:isNaN(t)?1e4:t,sustain:isNaN(i)?22050:i,release:isNaN(n)?1e4:n,attackLevel:r||1,sustainLevel:s||.5,releaseTrigger:0},run:function(){this.setPhase(0),this.setState(0)},stop:function(){this.releaseTrigger=1}};Gibberish.extend(this,o);var h=0,u=0,c=0,l=this;return this.callback=function(e,t,i,n,r,s,a){var o=0;return c=1===c?1:a,0===u?(o=h/e*r,++h/e===1&&(u++,h=t)):1===u?(o=h/t*(r-s)+s,--h<=0&&(null!==i?(u+=1,h=i):(u+=2,h=n))):2===u?(o=s,l.requireReleaseTrigger&&c?(u++,h=n,l.releaseTrigger=0,c=0):0!==h--||l.requireReleaseTrigger||(u++,h=n)):3===u&&(h--,o=h/n*s,0>=h&&u++),o},this.call=function(){return this.callback(this.attack,this.decay,this.sustain,this.release,this.attackLevel,this.sustainLevel,this.releaseTrigger)},this.setPhase=function(e){h=e},this.setState=function(e){u=e,h=0},this.getState=function(){return u},this.init(),this},Gibberish.ADSR.prototype=Gibberish._envelope,Gibberish.ADR=function(e,t,i,n,r){var s={name:"adr",type:"envelope",properties:{attack:isNaN(e)?11025:e,decay:isNaN(t)?11025:t,release:isNaN(i)?22050:i,attackLevel:n||1,releaseLevel:r||.2},run:function(){this.setPhase(0),this.setState(0)}};Gibberish.extend(this,s);var a=0,o=0;return this.callback=function(e,t,i,n,r){var s=0;return 0===o?(s=a/e*n,++a/e===1&&(o++,a=t)):1===o?(s=a/t*(n-r)+r,--a<=0&&(o+=1,a=i)):2===o&&(a--,s=a/i*r,0>=a&&o++),s},this.setPhase=function(e){a=e},this.setState=function(e){o=e,a=0},this.getState=function(){return o},this.init(),this},Gibberish.ADR.prototype=Gibberish._envelope,Gibberish.analysis=function(){this.type="analysis",this.codegen=function(){if(Gibberish.memo[this.symbol])return Gibberish.memo[this.symbol];var e=this.variable?this.variable:Gibberish.generateSymbol("v");return Gibberish.memo[this.symbol]=e,this.variable=e,Gibberish.callbackArgs.push(this.symbol),Gibberish.callbackObjects.push(this.callback),this.codeblock="var "+this.variable+" = "+this.symbol+"();\n",-1===Gibberish.codeblock.indexOf(this.codeblock)&&Gibberish.codeblock.push(this.codeblock),this.variable},this.analysisCodegen=function(){var e=0;this.input.codegen?(e=this.input.codegen(),e.indexOf("op")>-1&&console.log("ANALYSIS BUG")):e=this.input.value?"undefined"!=typeof this.input.value.codegen?this.input.value.codegen():this.input.value:"null";var t=this.analysisSymbol+"("+e+",";for(var i in this.properties)"input"!==i&&(t+=this[i]+",");return t=t.slice(0,-1),t+=");",this.analysisCodeblock=t,-1===Gibberish.analysisCodeblock.indexOf(this.analysisCodeblock)&&Gibberish.analysisCodeblock.push(this.analysisCodeblock),-1===Gibberish.callbackObjects.indexOf(this.analysisCallback)&&Gibberish.callbackObjects.push(this.analysisCallback),t},this.remove=function(){Gibberish.analysisUgens.splice(Gibberish.analysisUgens.indexOf(this),1)},this.analysisInit=function(){this.analysisSymbol=Gibberish.generateSymbol(this.name),Gibberish.analysisUgens.push(this),Gibberish.dirty()}},Gibberish.analysis.prototype=new Gibberish.ugen,Gibberish._analysis=new Gibberish.analysis,Gibberish.Follow=function(){this.name="follow",this.properties={input:0,bufferSize:4410,mult:1};var e=Math.abs,t=[0],i=0,n=0,r=0;this.analysisCallback=function(s,a,o){"object"==typeof s&&(s=s[0]+s[1]),i+=e(s),i-=t[n],t[n]=e(s),n=(n+1)%a,t[n]=t[n]?t[n]:0,r=i/a*o},this.callback=this.getValue=function(){return r},this.init(),this.analysisInit(),this.processProperties(arguments)},Gibberish.Follow.prototype=Gibberish._analysis,Gibberish.SingleSampleDelay=function(){this.name="single_sample_delay",this.properties={input:arguments[0]||0,amp:arguments[1]||1};var e=0;this.analysisCallback=function(t){e=t},this.callback=function(){return e},this.getValue=function(){return e},this.init(),this.analysisInit(),this.processProperties(arguments)},Gibberish.SingleSampleDelay.prototype=Gibberish._analysis,Gibberish.Record=function(e,t,i){var n=new Float32Array(t),r=0,s=!1,a=this;Gibberish.extend(this,{name:"record",oncomplete:i,properties:{input:0,size:t||0},analysisCallback:function(e,t){s&&(n[r++]="object"==typeof e?e[0]+e[1]:e,r>=t&&(s=!1,a.remove()))},record:function(){return r=0,s=!0,this},getBuffer:function(){return n},getPhase:function(){return r},remove:function(){"undefined"!=typeof this.oncomplete&&this.oncomplete();
for(var e=0;e<Gibberish.analysisUgens.length;e++){var t=Gibberish.analysisUgens[e];if(t===this)return Gibberish.callbackArgs.indexOf(this.analysisSymbol)>-1&&Gibberish.callbackArgs.splice(Gibberish.callbackArgs.indexOf(this.analysisSymbol),1),Gibberish.callbackObjects.indexOf(this.analysisCallback)>-1&&Gibberish.callbackObjects.splice(Gibberish.callbackObjects.indexOf(this.analysisCallback),1),void Gibberish.analysisUgens.splice(e,1)}}}),this.properties.input=e,this.init(),this.analysisInit(),Gibberish.dirty()},Gibberish.Record.prototype=Gibberish._analysis,Gibberish.effect=function(){this.type="effect"},Gibberish.effect.prototype=new Gibberish.ugen,Gibberish._effect=new Gibberish.effect,Gibberish.Distortion=function(){var e=Math.abs,t=Math.log,i=Math.LN2;Gibberish.extend(this,{name:"distortion",properties:{input:0,amount:50},callback:function(n,r){var s;return r=r>2?r:2,"number"==typeof n?(s=n*r,n=s/(1+e(s))/(t(r)/i)):(s=n[0]*r,n[0]=s/(1+e(s))/(t(r)/i),s=n[1]*r,n[1]=s/(1+e(s))/(t(r)/i)),n}}).init().processProperties(arguments)},Gibberish.Distortion.prototype=Gibberish._effect,Gibberish.Delay=function(){var e=[],t=0;e.push(new Float32Array(2*Gibberish.context.sampleRate)),e.push(new Float32Array(2*Gibberish.context.sampleRate)),Gibberish.extend(this,{name:"delay",properties:{input:0,time:22050,feedback:.5,wet:1,dry:1},callback:function(i,n,r,s,a){var o="number"==typeof i?1:2,h=t++%88200,u=(h+(0|n))%88200;return 1===o?(e[0][u]=(i+e[0][h])*r,i=i*a+e[0][h]*s):(e[0][u]=(i[0]+e[0][h])*r,i[0]=i[0]*a+e[0][h]*s,e[1][u]=(i[1]+e[1][h])*r,i[1]=i[1]*a+e[1][h]*s),i}});var i=Math.round(this.properties.time);Object.defineProperty(this,"time",{configurable:!0,get:function(){return i},set:function(e){i=Math.round(e),Gibberish.dirty(this)}}),this.init(),this.processProperties(arguments)},Gibberish.Delay.prototype=Gibberish._effect,Gibberish.Decimator=function(){var e=0,t=[],i=Math.pow,n=Math.floor;Gibberish.extend(this,{name:"decimator",properties:{input:0,bitDepth:16,sampleRate:1},callback:function(r,s,a){e+=a;var o="number"==typeof r?1:2;if(1===o){if(e>=1){var h=i(s,2);t[0]=n(r*h)/h,e-=1}r=t[0]}else{if(e>=1){var h=i(s,2);t[0]=n(r[0]*h)/h,t[1]=n(r[1]*h)/h,e-=1}r=t}return r}}).init().processProperties(arguments)},Gibberish.Decimator.prototype=Gibberish._effect,Gibberish.RingModulation=function(){var e=(new Gibberish.Sine).callback,t=[0,0];Gibberish.extend(this,{name:"ringmod",properties:{input:0,frequency:440,amp:.5,mix:.5},callback:function(i,n,r,s){var a="number"==typeof i?1:2,o=1===a?i:i[0],h=e(n,r);if(o=o*(1-s)+o*h*s,2===a){var u=i[1];return u=u*(1-s)+u*h*s,t[0]=o,t[1]=u,t}return o}}).init().processProperties(arguments)},Gibberish.RingModulation.prototype=Gibberish._effect,Gibberish.DCBlock=function(){var e=0,t=0;Gibberish.extend(this,{name:"dcblock",type:"effect",properties:{input:0},reset:function(){e=0,t=0},callback:function(i){var n=i-e+.9997*t;return e=i,t=n,n}}).init().processProperties(arguments)},Gibberish.DCBlock.prototype=Gibberish._effect,Gibberish.Tremolo=function(){var e=(new Gibberish.Sine).callback;Gibberish.extend(this,{name:"tremolo",type:"effect",properties:{input:0,frequency:2.5,amp:.5},callback:function(t,i,n){var r="number"==typeof t?1:2,s=e(i,n);return 1===r?t*=s:(t[0]*=s,t[1]*=s),t}}).init().processProperties(arguments)},Gibberish.Tremolo.prototype=Gibberish._effect,Gibberish.OnePole=function(){var e=0;Gibberish.extend(this,{name:"onepole",type:"effect",properties:{input:0,a0:.15,b1:.85},callback:function(t,i,n){var r=t*i+e*n;return e=r,r},smooth:function(t,i){this.input=i[t],e=this.input,i[t]=this,this.obj=i,this.property=t,this.oldSetter=i.__lookupSetter__(t),this.oldGetter=i.__lookupGetter__(t);var n=this;Object.defineProperty(i,t,{get:function(){return n.input},set:function(e){n.input=e}})},remove:function(){Object.defineProperty(this.obj,this.property,{get:this.oldGetter,set:this.oldSetter}),this.obj[this.property]=this.input}}).init().processProperties(arguments)},Gibberish.OnePole.prototype=Gibberish._effect,Gibberish.Filter24=function(){var e=[0,0,0,0],t=[0,0,0,0],i=[0,0],n=isNaN(arguments[0])?.1:arguments[0],r=isNaN(arguments[1])?3:arguments[1];_isLowPass="undefined"!=typeof arguments[2]?arguments[2]:!0,Gibberish.extend(this,{name:"filter24",properties:{input:0,cutoff:n,resonance:r,isLowPass:_isLowPass},callback:function(n,r,s,a){var o="number"==typeof n?1:2,h=1===o?n:n[0],u=e[3]*s;if(u=u>1?1:u,r=0>r?0:r,r=r>1?1:r,h-=u,e[0]=e[0]+(-e[0]+h)*r,e[1]=e[1]+(-e[1]+e[0])*r,e[2]=e[2]+(-e[2]+e[1])*r,e[3]=e[3]+(-e[3]+e[2])*r,h=a?e[3]:h-e[3],2===o){var c=n[1];return u=t[3]*s,u=u>1?1:u,c-=u,t[0]=t[0]+(-t[0]+c)*r,t[1]=t[1]+(-t[1]+t[0])*r,t[2]=t[2]+(-t[2]+t[1])*r,t[3]=t[3]+(-t[3]+t[2])*r,c=a?t[3]:c-t[3],i[0]=h,i[1]=c,i}return h}}).init().processProperties(arguments)},Gibberish.Filter24.prototype=Gibberish._effect,Gibberish.SVF=function(){var e=[0,0],t=[0,0],i=Math.PI,n=[0,0];Gibberish.extend(this,{name:"SVF",properties:{input:0,cutoff:440,Q:2,mode:0,sr:Gibberish.context.sampleRate},callback:function(r,s,a,o,h){var u="number"==typeof r?1:2,c=1===u?r:r[0],l=2*i*s/h;a=1/a;var f=t[0]+l*e[0],b=c-f-a*e[0],p=l*b+e[0],d=b+f;if(e[0]=p,t[0]=f,c=0===o?f:1===o?b:2===o?p:d,2===u){var g=r[1],f=t[1]+l*e[1],b=g-f-a*e[1],p=l*b+e[1],d=b+f;e[1]=p,t[1]=f,g=0===o?f:1===o?b:2===o?p:d,n[0]=c,n[1]=g}else n=c;return n}}).init().processProperties(arguments)},Gibberish.SVF.prototype=Gibberish._effect,Gibberish.Biquad=function(){var e=x2=y1=y2=0,t=[0,0],i=.001639,n=.003278,r=.001639,s=-1.955777,a=.960601,o="LP",h=2e3,u=.5,c=Gibberish.context.sampleRate;Gibberish.extend(this,{name:"biquad",properties:{input:null},calculateCoefficients:function(){switch(o){case"LP":var e=2*Math.PI*h/c,t=Math.sin(e),l=Math.cos(e),f=t/(2*u);i=(1-l)/2,n=1-l,r=i,a0=1+f,s=-2*l,a=1-f;break;case"HP":var e=2*Math.PI*h/c,t=Math.sin(e),l=Math.cos(e),f=t/(2*u);i=(1+l)/2,n=-(1+l),r=i,a0=1+f,s=-2*l,a=1-f;break;case"BP":var e=2*Math.PI*h/c,t=Math.sin(e),l=Math.cos(e),b=Math.log(2)/2*u*e/t,f=t*(Math.exp(b)-Math.exp(-b))/2;i=f,n=0,r=-f,a0=1+f,s=-2*l,a=1-f;break;default:return}i/=a0,n/=a0,r/=a0,s/=a0,a/=a0},callback:function(o){var h="number"==typeof o?1:2,u=0,c=0,l=1===h?o:o[0];return u=i*l+n*e+r*x2-s*y1-a*y2,x2=e,e=o,y2=y1,y1=u,2===h&&(inR=o[1],c=i*inR+n*e[1]+r*x2[1]-s*y1[1]-a*y2[1],x2[1]=e[1],e[1]=o[1],y2[1]=y1[1],y1[1]=c,t[0]=u,t[1]=c),1===h?u:t}}).init(),Object.defineProperties(this,{mode:{get:function(){return o},set:function(e){o=e,this.calculateCoefficients()}},cutoff:{get:function(){return h},set:function(e){h=e,this.calculateCoefficients()}},Q:{get:function(){return u},set:function(e){u=e,this.calculateCoefficients()}}}),this.processProperties(arguments),this.calculateCoefficients()},Gibberish.Biquad.prototype=Gibberish._effect,Gibberish.Flanger=function(){var e=[new Float32Array(88200),new Float32Array(88200)],t=88200,i=(new Gibberish.Sine).callback,n=Gibberish.interpolate,r=-100,s=0;Gibberish.extend(this,{name:"flanger",properties:{input:0,rate:.25,feedback:0,amount:125,offset:125},callback:function(a,o,h,u){var c="number"==typeof a?1:2,l=r+i(o,.95*u);l>t?l-=t:0>l&&(l+=t);var f=n(e[0],l);return e[0][s]=1===c?a+f*h:a[0]+f*h,2===c?(a[0]+=f,f=n(e[1],l),e[1][s]=a[1]+f*h,a[1]+=f):a+=f,++s>=t&&(s=0),++r>=t&&(r=0),a}}).init().processProperties(arguments),r=-1*this.offset},Gibberish.Flanger.prototype=Gibberish._effect,Gibberish.Vibrato=function(){var e=[new Float32Array(88200),new Float32Array(88200)],t=88200,i=(new Gibberish.Sine).callback,n=Gibberish.interpolate,r=-100,s=0;Gibberish.extend(this,{name:"vibrato",properties:{input:0,rate:5,amount:.5,offset:125},callback:function(a,o,h,u){var c="number"==typeof a?1:2,l=r+i(o,h*u-1);l>t?l-=t:0>l&&(l+=t);var f=n(e[0],l);return e[0][s]=1===c?a:a[0],2===c?(a[0]=f,f=n(e[1],l),e[1][s]=a[1],a[1]=f):a=f,++s>=t&&(s=0),++r>=t&&(r=0),a}}).init().processProperties(arguments),r=-1*this.offset},Gibberish.Vibrato.prototype=Gibberish._effect,Gibberish.BufferShuffler=function(){var e=[new Float32Array(88200),new Float32Array(88200)],t=88200,i=0,n=0,r=0,s=0,a=0,o=Math.random,h=1,u=!1,c=!1,l=!1,f=Gibberish.interpolate,b=!1,p=1,d=!1,g=Gibberish.rndf,y=[0,0];Gibberish.extend(this,{name:"buffer_shuffler",properties:{input:0,chance:.25,rate:11025,length:22050,reverseChange:.5,pitchChance:.5,pitchMin:.25,pitchMax:2,wet:1,dry:0},callback:function(m,v,G,w,k,x,_,A,S,I){var j="number"==typeof m?1:2;a?++s%(w-400)===0&&(u=!1,c=!0,h=1,s=0):(e[0][n]=1===j?m:m[0],e[1][n]=1===j?m:m[1],n++,n%=t,d=0===n?1:d,r++,r%G==0&&o()<v&&(l=o()<k,a=!0,l||(i=n-w,0>i&&(i=t+i)),b=o()<x,b&&(p=g(_,A)),h=1,u=!0,c=!1)),i+=l?-1*p:p,0>i?i+=t:i>=t&&(i-=t);var P,C,R,M,T=f(e[0],i);return u?(h-=.0025,R=T*(1-h),P=1===j?R+m*h:R+m[0]*h,2===j&&(M=f(e[1],i),R=M*(1-h),C=1===j?P:R+m[1]*h),.0025>=h&&(u=!1)):c?(h-=.0025,R=T*h,P=1===j?R+m*h:R+m[0]*(1-h),2===j&&(M=f(e[1],i),R=M*h,C=R+m[1]*(1-h)),.0025>=h&&(c=!1,a=!1,l=!1,p=1,b=0)):1===j?P=a&&d?T*S+m*I:m:(M=f(e[1],i),P=a&&d?T*S+m[0]*I:m[0],C=a&&d?M*S+m[1]*I:m[1]),y=[P,C],1===j?P:y}}).init().processProperties(arguments)},Gibberish.BufferShuffler.prototype=Gibberish._effect,Gibberish.AllPass=function(e){var t=-1,i=new Float32Array(e||500),n=i.length;Gibberish.extend(this,{name:"allpass",properties:{input:0},callback:function(e){t=++t%n;var r=i[t],s=-1*e+r;return i[t]=e+.5*r,s}})},Gibberish.Comb=function(e){var t=new Float32Array(e||1200),i=t.length,n=0,r=0;Gibberish.extend(this,{name:"comb",properties:{input:0,feedback:.84,damping:.2},callback:function(e,s,a){var o=++n%i,h=t[o];return r=h*(1-a)+r*a,t[o]=e+r*s,h}})},Gibberish.Reverb=function(){var e={combCount:8,combTuning:[1116,1188,1277,1356,1422,1491,1557,1617],allPassCount:4,allPassTuning:[556,441,341,225],allPassFeedback:.5,fixedGain:.015,scaleDamping:.4,scaleRoom:.28,offsetRoom:.7,stereoSpread:23},t=.84,i=[],n=[],r=[0,0];Gibberish.extend(this,{name:"reverb",roomSize:.5,properties:{input:0,wet:.5,dry:.55,roomSize:.84,damping:.5},callback:function(e,t,s,a,o){for(var h="object"==typeof e?2:1,u=1===h?e:e[0]+e[1],c=.015*u,l=c,f=0;8>f;f++){var b=i[f](c,.98*a,.4*o);l+=b}for(var f=0;4>f;f++)l=n[f](l);return r[0]=r[1]=u*s+l*t,r}}).init().processProperties(arguments),this.setFeedback=function(e){t=e};for(var s=0;8>s;s++)i.push(new Gibberish.Comb(e.combTuning[s]).callback);for(var s=0;4>s;s++)n.push(new Gibberish.AllPass(e.allPassTuning[s],e.allPassFeedback).callback)},Gibberish.Reverb.prototype=Gibberish._effect,Gibberish.Granulator=function(e){var t=[];buffer=null,interpolate=Gibberish.interpolate,panner=Gibberish.makePanner(),bufferLength=0,debug=0,write=0,self=this,out=[0,0],_out=[0,0],rndf=Gibberish.rndf,numberOfGrains=e.numberOfGrains||20,Gibberish.extend(this,{name:"granulator",bufferLength:88200,reverse:!0,spread:.5,properties:{speed:1,speedMin:-0,speedMax:0,grainSize:1e3,position:.5,positionMin:0,positionMax:0,amp:.2,fade:.1,pan:0,shouldWrite:!1},setBuffer:function(e){buffer=e,bufferLength=e.length},callback:function(e,i,n,r,s,a,o,h,u,c){for(var l=0;numberOfGrains>l;l++){var f=t[l];if(f._speed>0){f.pos>f.end&&(f.pos=(o+rndf(s,a))*buffer.length,f.start=f.pos,f.end=f.start+r,f._speed=e+rndf(i,n),f._speed=f._speed<.1?.1:f._speed,f._speed=f._speed<.1&&f._speed>0?.1:f._speed,f._speed=f._speed>-.1&&f._speed<0?-.1:f._speed,f.fadeAmount=f._speed*u*r,f.pan=rndf(-1*self.spread,self.spread));for(var b=f.pos;b>buffer.length;)b-=buffer.length;for(;0>b;)b+=buffer.length;var p=interpolate(buffer,b);p*=f.pos<f.fadeAmount+f.start?(f.pos-f.start)/f.fadeAmount:1,p*=f.pos>f.end-f.fadeAmount?(f.end-f.pos)/f.fadeAmount:1}else{f.pos<f.end&&(f.pos=(o+rndf(s,a))*buffer.length,f.start=f.pos,f.end=f.start-r,f._speed=e+rndf(i,n),f._speed=f._speed<.1&&f._speed>0?.1:f._speed,f._speed=f._speed>-.1&&f._speed<0?-.1:f._speed,f.fadeAmount=f._speed*u*r);for(var b=f.pos;b>buffer.length;)b-=buffer.length;for(;0>b;)b+=buffer.length;var p=interpolate(buffer,b);p*=f.pos>f.start-f.fadeAmount?(f.start-f.pos)/f.fadeAmount:1,p*=f.pos<f.end+f.fadeAmount?(f.end-f.pos)/f.fadeAmount:1}_out=panner(p*h,f.pan,_out),out[0]+=_out[0],out[1]+=_out[1],f.pos+=f._speed}return panner(out,c,out)}}).init().processProperties(arguments);for(var i=0;numberOfGrains>i;i++)t[i]={pos:self.position+Gibberish.rndf(self.positionMin,self.positionMax),_speed:self.speed+Gibberish.rndf(self.speedMin,self.speedMax)},t[i].start=t[i].pos,t[i].end=t[i].pos+self.grainSize,t[i].fadeAmount=t[i]._speed*self.fade*self.grainSize,t[i].pan=Gibberish.rndf(-1*self.spread,self.spread);"undefined"!=typeof e.buffer&&(buffer=e.buffer,bufferLength=buffer.length)},Gibberish.Granulator.prototype=Gibberish._effect,Gibberish.synth=function(){this.type="oscillator",this.oscillatorInit=function(){this.fx=new Array2,this.fx.parent=this}},Gibberish.synth.prototype=new Gibberish.ugen,Gibberish._synth=new Gibberish.synth,Gibberish.Synth=function(e){this.name="synth",this.properties={frequency:0,pulsewidth:.5,attack:22050,decay:22050,sustain:22050,release:22050,attackLevel:1,sustainLevel:.5,releaseTrigger:0,glide:.15,amp:.25,channels:2,pan:0,sr:Gibberish.context.sampleRate},this.note=function(e,n){if(0!==n){if("object"!=typeof this.frequency){if(t&&e===c)return void(this.releaseTrigger=1);this.frequency=c=e,this.releaseTrigger=0}else this.frequency[0]=c=e,this.releaseTrigger=0,Gibberish.dirty(this);"undefined"!=typeof n&&(this.amp=n),i.run()}else this.releaseTrigger=1},e=e||{};var t="undefined"==typeof e.useADSR?!1:e.useADSR,i=t?new Gibberish.ADSR:new Gibberish.AD,n=i.getState,r=i.callback,s=new Gibberish.PWM,a=s.callback,o=(new Gibberish.OnePole).callback,h=Gibberish.makePanner(),u=this,c=0,l=[0,0];i.requireReleaseTrigger=e.requireReleaseTrigger||!1,this.callback=function(e,i,s,c,f,b,p,d,g,y,m,v,G,w){y=y>=1?.99999:y,e=o(e,1-y,y);var k,x;return t?(k=r(s,c,f,b,p,d,g),g&&(u.releaseTrigger=0),n()<4?(x=a(e,1,i,w)*k*m,1===v?x:h(x,G,l)):(x=l[0]=l[1]=0,1===v?x:l)):n()<2?(k=r(s,c),x=a(e,1,i,w)*k*m,1===v?x:h(x,G,l)):(x=l[0]=l[1]=0,1===v?x:l)},this.getEnv=function(){return i},this.getOsc=function(){return s},this.setOsc=function(e){s=e,a=s.callback};var f="PWM";Object.defineProperty(this,"waveform",{get:function(){return f},set:function(e){this.setOsc(new Gibberish[e])}}),this.init(),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.Synth.prototype=Gibberish._synth,Gibberish.PolySynth=function(){this.__proto__=new Gibberish.Bus2,Gibberish.extend(this,{name:"polysynth",maxVoices:5,voiceCount:0,frequencies:[],polyProperties:{frequency:0,glide:0,attack:22050,decay:22050,pulsewidth:.5,waveform:"PWM"},note:function(e,t){var i=this.frequencies.indexOf(e),n=i>-1?i:this.voiceCount++,r=this.children[n];r.note(e,t),this.frequencies[n]=e,this.voiceCount>=this.maxVoices&&(this.voiceCount=0)}}),this.amp=1/this.maxVoices,Gibberish.polyInit(this),this.children=[],"object"==typeof arguments[0]&&(this.maxVoices=arguments[0].maxVoices?arguments[0].maxVoices:this.maxVoices,this.useADSR="undefined"!=typeof arguments[0].useADSR?arguments[0].useADSR:!1,this.requireReleaseTrigger="undefined"!=typeof arguments[0].requireReleaseTrigger?arguments[0].requireReleaseTrigger:!1),this.dirty=!0;for(var e=0;e<this.maxVoices;e++){var t={waveform:this.waveform,attack:this.attack,decay:this.decay,pulsewidth:this.pulsewidth,channels:2,amp:1,useADSR:this.useADSR||!1,requireReleaseTrigger:this.requireReleaseTrigger||!1},i=new Gibberish.Synth(t).connect(this);this.children.push(i)}this.processProperties(arguments),Gibberish._synth.oscillatorInit.call(this)},Gibberish.Synth2=function(e){this.name="synth2",this.properties={frequency:0,pulsewidth:.5,attack:22050,decay:22050,sustain:22050,release:22050,attackLevel:1,sustainLevel:.5,releaseTrigger:0,cutoff:.25,resonance:3.5,useLowPassFilter:!0,glide:.15,amp:.25,channels:1,pan:0,sr:Gibberish.context.sampleRate},this.note=function(e,n){if(0!==n){if("object"!=typeof this.frequency){if(t&&e===l)return void(this.releaseTrigger=1);this.frequency=l=e,this.releaseTrigger=0}else this.frequency[0]=l=e,this.releaseTrigger=0,Gibberish.dirty(this);"undefined"!=typeof n&&(this.amp=n),i.run()}else this.releaseTrigger=1},e=e||{};var t="undefined"==typeof e.useADSR?!1:e.useADSR,i=t?new Gibberish.ADSR:new Gibberish.AD,n=i.getState,r=i.callback,s=new Gibberish.PWM,a=s.callback,o=new Gibberish.Filter24,h=o.callback,u=(new Gibberish.OnePole).callback,c=Gibberish.makePanner(),l=0,f=this,b=[0,0];i.requireReleaseTrigger=e.requireReleaseTrigger||!1,this.callback=function(e,i,s,o,l,p,d,g,y,m,v,G,w,k,x,_,A){w=w>=1?.99999:w,e=u(e,1-w,w);var S,I;return t?(S=r(s,o,l,p,d,g,y),y&&(f.releaseTrigger=0),n()<4?(I=h(a(e,.15,i,A),m*S,v,G)*S*k,1===x?I:c(I,_,b)):(I=b[0]=b[1]=0,1===x?I:b)):n()<2?(S=r(s,o),I=h(a(e,.15,i,A),m*S,v,G)*S*k,1===x?I:c(I,_,b)):(I=b[0]=b[1]=0,1===x?I:b)},this.getUseADSR=function(){return t},this.getEnv=function(){return i},this.getOsc=function(){return s},this.setOsc=function(e){s=e,a=s.callback};var p="PWM";Object.defineProperty(this,"waveform",{get:function(){return p},set:function(e){this.setOsc(new Gibberish[e])}}),this.init(),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.Synth2.prototype=Gibberish._synth,Gibberish.PolySynth2=function(){this.__proto__=new Gibberish.Bus2,Gibberish.extend(this,{name:"polysynth2",maxVoices:5,voiceCount:0,frequencies:[],polyProperties:{frequency:0,glide:0,attack:22050,decay:22050,pulsewidth:.5,resonance:3.5,cutoff:.25,useLowPassFilter:!0,waveform:"PWM"},note:function(e,t){var i=this.frequencies.indexOf(e),n=i>-1?i:this.voiceCount++,r=this.children[n];r.note(e,t),this.frequencies[n]=e,this.voiceCount>=this.maxVoices&&(this.voiceCount=0)}}),this.amp=1/this.maxVoices,Gibberish.polyInit(this),this.children=[],"object"==typeof arguments[0]&&(this.maxVoices=arguments[0].maxVoices?arguments[0].maxVoices:this.maxVoices,this.useADSR="undefined"!=typeof arguments[0].useADSR?arguments[0].useADSR:!1,this.requireReleaseTrigger="undefined"!=typeof arguments[0].requireReleaseTrigger?arguments[0].requireReleaseTrigger:!1),this.dirty=!0;for(var e=0;e<this.maxVoices;e++){var t={attack:this.attack,decay:this.decay,pulsewidth:this.pulsewidth,channels:2,amp:1,useADSR:this.useADSR||!1,requireReleaseTrigger:this.requireReleaseTrigger||!1},i=new Gibberish.Synth2(t);i.connect(this),this.children.push(i)}this.processProperties(arguments),Gibberish._synth.oscillatorInit.call(this)},Gibberish.FMSynth=function(e){this.name="fmSynth",this.properties={frequency:0,cmRatio:2,index:5,attack:22050,decay:22050,sustain:22050,release:22050,attackLevel:1,sustainLevel:.5,releaseTrigger:0,glide:.15,amp:.25,channels:2,pan:0},this.note=function(e,n){if(0!==n){if("object"!=typeof this.frequency){if(t&&e===l)return void(this.releaseTrigger=1);this.frequency=l=e,this.releaseTrigger=0}else this.frequency[0]=l=e,this.releaseTrigger=0,Gibberish.dirty(this);"undefined"!=typeof n&&(this.amp=n),i.run()}else this.releaseTrigger=1},e=e||{};var t="undefined"==typeof e.useADSR?!1:e.useADSR,i=t?new Gibberish.ADSR:new Gibberish.AD,n=i.getState,r=i.callback,s=(new Gibberish.Sine).callback,a=(new Gibberish.Sine).callback,o=(new Gibberish.OnePole).callback,h=Gibberish.makePanner(),u=[0,0],c=this,l=0;i.requireReleaseTrigger=e.requireReleaseTrigger||!1,this.callback=function(e,i,l,f,b,p,d,g,y,m,v,G,w,k){var x,_,A;return v>=1&&(v=.9999),e=o(e,1-v,v),t?(x=r(f,b,p,d,g,y,m),m&&(c.releaseTrigger=0),n()<4?(A=a(e*i,e*l)*x,_=s(e+A,1)*x*G,1===w?_:h(_,k,u)):(_=u[0]=u[1]=0,1===w?_:u)):n()<2?(x=r(f,b),A=a(e*i,e*l)*x,_=s(e+A,1)*x*G,u[0]=u[1]=_,1===w?_:h(_,k,u)):(_=u[0]=u[1]=0,1===w?_:h(_,k,u))},this.init(),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.FMSynth.prototype=Gibberish._synth,Gibberish.PolyFM=function(){this.__proto__=new Gibberish.Bus2,Gibberish.extend(this,{name:"polyfm",maxVoices:5,voiceCount:0,children:[],frequencies:[],polyProperties:{glide:0,attack:22050,decay:22050,index:5,cmRatio:2},note:function(e,t){var i=this.frequencies.indexOf(e),n=i>-1?i:this.voiceCount++,r=this.children[n];r.note(e,t),this.frequencies[n]=e,this.voiceCount>=this.maxVoices&&(this.voiceCount=0)}}),this.amp=1/this.maxVoices,Gibberish.polyInit(this),this.children=[],"object"==typeof arguments[0]&&(this.maxVoices=arguments[0].maxVoices?arguments[0].maxVoices:this.maxVoices,this.useADSR="undefined"!=typeof arguments[0].useADSR?arguments[0].useADSR:!1,this.requireReleaseTrigger="undefined"!=typeof arguments[0].requireReleaseTrigger?arguments[0].requireReleaseTrigger:!1);for(var e=0;e<this.maxVoices;e++){var t={attack:this.attack,decay:this.decay,cmRatio:this.cmRatio,index:this.index,channels:2,useADSR:this.useADSR||!1,requireReleaseTrigger:this.requireReleaseTrigger||!1,amp:1},i=new Gibberish.FMSynth(t);i.connect(this),this.children.push(i)}this.processProperties(arguments),Gibberish._synth.oscillatorInit.call(this)},Gibberish.Sampler=function(){function e(e){Gibberish.context.decodeAudioData(e,function(e){s=e.getChannelData(0),o.length=t=o.end=a=s.length,o.isPlaying=!0,console.log("LOADED",o.file,a),Gibberish.audioFiles[o.file]=s,o.onload&&o.onload(),0!==o.playOnLoad&&o.note(o.playOnLoad),o.isLoaded=!0},function(e){console.log("Error decoding file",e)})}var t=1,i=Gibberish.interpolate,n=Gibberish.makePanner(),r=[0,0],s=null,a=1,o=this;if(Gibberish.extend(this,{name:"sampler",file:null,isLoaded:!1,playOnLoad:0,properties:{pitch:1,amp:1,isRecording:!1,isPlaying:!0,input:0,length:0,start:0,end:1,loops:0,pan:0},_onload:function(e){s=e.channels[0],a=e.length,o.end=a,o.length=t=a,o.isPlaying=!0,console.log("LOADED ",o.file,a),Gibberish.audioFiles[o.file]=s,o.onload&&o.onload(),0!==o.playOnLoad&&o.note(o.playOnLoad),o.isLoaded=!0},floatTo16BitPCM:function(e,t,i){for(var n=0;n<i.length-1;n++,t+=2){var r=Math.max(-1,Math.min(1,i[n]));e.setInt16(t,0>r?32768*r:32767*r,!0)}},encodeWAV:function(){function e(e,t,i){for(var n=0;n<i.length;n++)e.setUint8(t+n,i.charCodeAt(n))}var t=this.getBuffer(),i=new ArrayBuffer(44+2*t.length),n=new DataView(i),r=Gibberish.context.sampleRate;return e(n,0,"RIFF"),n.setUint32(4,32+2*t.length,!0),e(n,8,"WAVE"),e(n,12,"fmt "),n.setUint32(16,16,!0),n.setUint16(20,1,!0),n.setUint16(22,1,!0),n.setUint32(24,r,!0),n.setUint32(28,4*r,!0),n.setUint16(32,2,!0),n.setUint16(34,16,!0),e(n,36,"data"),n.setUint32(40,2*t.length,!0),this.floatTo16BitPCM(n,44,t),n},download:function(){var e=this.encodeWAV(),t=new Blob([e]),i=window.webkitURL.createObjectURL(t),n=window.document.createElement("a");n.href=i,n.download="output.wav";var r=document.createEvent("Event");r.initEvent("click",!0,!0),n.dispatchEvent(r)},note:function(e,i){switch(typeof e){case"number":this.pitch=e;break;case"function":this.pitch=e();break;case"object":this.pitch=e[0]}if("number"==typeof i&&(this.amp=i),null!==this.function){this.isPlaying=!0;var n;switch(typeof this.pitch){case"number":n=this.pitch;break;case"function":n=this.pitch();break;case"object":n=this.pitch[0],isNaN(n)&&(n=n())}t=n>0?this.start:this.end}},getBuffer:function(){return s},setBuffer:function(e){s=e},getPhase:function(){return t},setPhase:function(e){t=e},callback:function(e,a,o,h,u,c,l,f,b,p){var d=0;return t+=e,f>t&&t>0?(e>0?d=null!==s&&h?i(s,t):0:t>l?d=null!==s&&h?i(s,t):0:t=b?f:t,n(d*a,p,r)):(t=b&&e>0?l:t,t=b&&0>e?f:t,r[0]=r[1]=d,r)}}).init().oscillatorInit().processProperties(arguments),"undefined"!=typeof arguments[0]&&("string"==typeof arguments[0]?(this.file=arguments[0],this.pitch=0):"object"==typeof arguments[0]&&arguments[0].file&&(this.file=arguments[0].file)),"undefined"!=typeof Gibberish.audioFiles[this.file])s=Gibberish.audioFiles[this.file],this.end=this.bufferLength=s.length,t=this.bufferLength,Gibberish.dirty(this),this.onload&&this.onload();else if(null!==this.file){var e,h=new XMLHttpRequest;h.open("GET",this.file,!0),h.responseType="arraybuffer",h.onload=function(){e(this.response)},h.send()}else"undefined"!=typeof this.buffer&&(this.isLoaded=!0,s=this.buffer,this.end=this.bufferLength=s.length||88200,t=this.bufferLength,arguments[0]&&arguments[0].loops&&(this.loops=1),Gibberish.dirty(this),this.onload&&this.onload())},Gibberish.Sampler.prototype=Gibberish._oscillator,Gibberish.Sampler.prototype.record=function(e,t){this.isRecording=!0;var i=this;return this.recorder=new Gibberish.Record(e,t,function(){i.setBuffer(this.getBuffer()),i.end=bufferLength=i.getBuffer().length,i.setPhase(i.end),i.isRecording=!1}).record(),this},Gibberish.MonoSynth=function(){Gibberish.extend(this,{name:"monosynth",properties:{attack:1e4,decay:1e4,cutoff:.2,resonance:2.5,amp1:1,amp2:1,amp3:1,filterMult:.3,isLowPass:!0,pulsewidth:.5,amp:.6,detune2:.01,detune3:-.01,octave2:1,octave3:-1,glide:0,pan:0,frequency:0,channels:1},waveform:"Saw3",note:function(e,n){"undefined"!=typeof n&&0!==n&&(this.amp=n),0!==n&&("object"!=typeof this.frequency?this.frequency=e:(this.frequency[0]=e,Gibberish.dirty(this)),i()>0&&t.run())},_note:function(e,i){if("object"!=typeof this.frequency){if(useADSR&&e===lastFrequency&&0===i)return void(this.releaseTrigger=1);0!==i&&(this.frequency=lastFrequency=e),this.releaseTrigger=0}else 0!==i&&(this.frequency[0]=lastFrequency=e),this.releaseTrigger=0,Gibberish.dirty(this);"undefined"!=typeof i&&0!==i&&(this.amp=i),0!==i&&t.run()}});var e=this.waveform;Object.defineProperty(this,"waveform",{get:function(){return e},set:function(t){e!==t&&(e=t,s=(new Gibberish[t]).callback,a=(new Gibberish[t]).callback,o=(new Gibberish[t]).callback)}});var t=new Gibberish.AD(this.attack,this.decay),i=t.getState,n=t.callback,r=(new Gibberish.Filter24).callback,s=new Gibberish[this.waveform](this.frequency,this.amp1).callback,a=new Gibberish[this.waveform](this.frequency2,this.amp2).callback,o=new Gibberish[this.waveform](this.frequency3,this.amp3).callback,h=(new Gibberish.OnePole).callback,u=Gibberish.makePanner(),c=[0,0];this.callback=function(e,t,l,f,b,p,d,g,y,m,v,G,w,k,x,_,A,S,I){if(i()<2){_>=1&&(_=.9999),S=h(S,1-_,_);var j=S;if(k>0)for(var P=0;k>P;P++)j*=2;else if(0>k)for(var P=0;P>k;P--)j/=2;var C=S;if(x>0)for(var P=0;x>P;P++)C*=2;else if(0>x)for(var P=0;P>x;P--)C/=2;j+=G>0?(2*S-S)*G:(S-S/2)*G,C+=w>0?(2*S-S)*w:(S-S/2)*w;var R=s(S,b,m)+a(j,p,m)+o(C,d,m),M=n(e,t),T=r(R,l+g*M,f,y,1)*M;return T*=v,c[0]=c[1]=T,1===I?c:u(T,A,c)}return c[0]=c[1]=0,c},this.init(),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.MonoSynth.prototype=Gibberish._synth,Gibberish.Binops={"export":function(e){Gibberish.export("Binops",e||window)},operator:function(){var e=new Gibberish.ugen,t=arguments[0],i=Array.prototype.slice.call(arguments,1);e.name="op",e.properties={};for(var n=0;n<i.length;n++)e.properties[n]=i[n];return e.init.apply(e,i),e.codegen=function(){var e,i="( ";e=Object.keys(this.properties);for(var n=0;n<e.length;n++){var r="object"==typeof this[n];i+=r?this[n].codegen():this[n],n<e.length-1&&(i+=" "+t+" ")}return i+=" )",this.codeblock=i,i},e},Add:function(){var e=Array.prototype.slice.call(arguments,0);return e.unshift("+"),Gibberish.Binops.operator.apply(null,e)},Sub:function(){var e=Array.prototype.slice.call(arguments,0);return e.unshift("-"),Gibberish.Binops.operator.apply(null,e)},Mul:function(){var e=Array.prototype.slice.call(arguments,0);return e.unshift("*"),Gibberish.Binops.operator.apply(null,e)},Div:function(){var e=Array.prototype.slice.call(arguments,0);return e.unshift("/"),Gibberish.Binops.operator.apply(null,e)},Mod:function(){var e=Array.prototype.slice.call(arguments,0);return e.unshift("%"),Gibberish.Binops.operator.apply(null,e)},Abs:function(){var e=Array.prototype.slice.call(arguments,0),t={name:"abs",properties:{},callback:Math.abs.bind(t)};return t.__proto__=new Gibberish.ugen,t.properties[0]=e[0],t.init(),t},Sqrt:function(){var e=(Array.prototype.slice.call(arguments,0),{name:"sqrt",properties:{},callback:Math.sqrt.bind(e)});return e.__proto__=new Gibberish.ugen,e.properties[i]=arguments[0],e.init(),e},Pow:function(){var e=Array.prototype.slice.call(arguments,0),t={name:"pow",properties:{},callback:Math.pow.bind(t)};t.__proto__=new Gibberish.ugen;for(var i=0;i<e.length;i++)t.properties[i]=e[i];return t.init(),console.log(t.callback),t},Clamp:function(){var e=Array.prototype.slice.call(arguments,0),t={name:"clamp",properties:{input:0,min:0,max:1},callback:function(e,t,i){return t>e?e=t:e>i&&(e=i),e}};return t.__proto__=new Gibberish.ugen,t.init(),t.processProperties(e),t},Merge:function(){var e=Array.prototype.slice.call(arguments,0),t={name:"merge",properties:{},callback:function(e){return e[0]+e[1]}};t.__proto__=new Gibberish.ugen;for(var i=0;i<e.length;i++)t.properties[i]=e[i];return t.init(),t},Map:function(e,t,i,n,r,s,a){var o=Math.pow,h=0,u=0,c={name:"map",properties:{input:e,outputMin:t,outputMax:i,inputMin:n,inputMax:r,curve:s||h,wrap:a||!1},callback:function(e,t,i,n,r,s,a){var h,c=i-t,l=r-n,f=(e-n)/l;return f>1?f=a?f%1:1:0>f&&(f=a?1+f%1:0),h=0===s?t+f*c:t+o(f,1.5)*c,u=h,h},getValue:function(){return u}};return c.__proto__=new Gibberish.ugen,c.init(),c}},Gibberish.Time={bpm:120,"export":function(e){Gibberish.export("Time",e||window)},ms:function(e){return e*Gibberish.context.sampleRate/1e3},seconds:function(e){return e*Gibberish.context.sampleRate},beats:function(e){return function(){var t=Gibberish.context.sampleRate/(Gibberish.Time.bpm/60);return t*e}}},Gibberish.Sequencer2=function(){var e=this,t=0;Gibberish.extend(this,{target:null,key:null,values:null,valuesIndex:0,durations:null,durationsIndex:0,nextTime:0,playOnce:!1,repeatCount:0,repeatTarget:null,isConnected:!0,keysAndValues:null,counts:{},properties:{rate:1,isRunning:!1,nextTime:0},offset:0,name:"seq",callback:function(i,n,r){if(n){if(t>=r){if(null!==e.values){if(e.target){var s=e.values[e.valuesIndex++];"function"==typeof s&&(s=s()),"function"==typeof e.target[e.key]?e.target[e.key](s):e.target[e.key]=s}else"function"==typeof e.values[e.valuesIndex]&&e.values[e.valuesIndex++]();e.valuesIndex>=e.values.length&&(e.valuesIndex=0)}else if(null!==e.keysAndValues)for(var a in e.keysAndValues){var o=e.counts[a]++,s=e.keysAndValues[a][o];"function"==typeof s&&(s=s()),"function"==typeof e.target[a]?e.target[a](s):e.target[a]=s,e.counts[a]>=e.keysAndValues[a].length&&(e.counts[a]=0)}else"function"==typeof e.target[e.key]&&e.target[e.key]();if(t-=r,Array.isArray(e.durations)){var h=e.durations[e.durationsIndex++];e.nextTime="function"==typeof h?h():h,e.durationsIndex>=e.durations.length&&(e.durationsIndex=0)}else{var h=e.durations;e.nextTime="function"==typeof h?h():h}return e.repeatTarget&&(e.repeatCount++,e.repeatCount===e.repeatTarget&&(e.isRunning=!1,e.repeatCount=0)),0}t+=i}return 0},start:function(e){return e||(t=0),this.isRunning=!0,this},stop:function(){return this.isRunning=!1,this},repeat:function(e){return this.repeatTarget=e,this},shuffle:function(){for(i in this.keysAndValues)this.shuffleArray(this.keysAndValues[i])},shuffleArray:function(e){for(var t,i,n=e.length;n;t=parseInt(Math.random()*n),i=e[--n],e[n]=e[t],e[t]=i);}}),this.init(arguments),this.processProperties(arguments);for(var i in this.keysAndValues)this.counts[i]=0;this.oscillatorInit(),t+=this.offset,this.connect()},Gibberish.Sequencer2.prototype=Gibberish._oscillator,Gibberish.Sequencer=function(){Gibberish.extend(this,{target:null,key:null,values:null,valuesIndex:0,durations:null,durationsIndex:0,nextTime:0,phase:0,isRunning:!1,playOnce:!1,repeatCount:0,repeatTarget:null,isConnected:!0,keysAndValues:null,counts:{},offset:0,name:"seq",tick:function(){if(this.isRunning){if(this.phase>=this.nextTime){if(null!==this.values){if(this.target){var e=this.values[this.valuesIndex++];if("function"==typeof e)try{e=e()}catch(t){console.error("ERROR: Can't execute function triggered by Sequencer:\n"+e.toString()),this.values.splice(this.valuesIndex-1,1),this.valuesIndex--}"function"==typeof this.target[this.key]?this.target[this.key](e):this.target[this.key]=e}else if("function"==typeof this.values[this.valuesIndex])try{this.values[this.valuesIndex++]()}catch(t){console.error("ERROR: Can't execute function triggered by Sequencer:\n"+this.values[this.valuesIndex-1].toString()),this.values.splice(this.valuesIndex-1,1),this.valuesIndex--}this.valuesIndex>=this.values.length&&(this.valuesIndex=0)}else if(null!==this.keysAndValues)for(var i in this.keysAndValues){var n="function"==typeof this.keysAndValues[i].pick?this.keysAndValues[i].pick():this.counts[i]++,e=this.keysAndValues[i][n];
if("function"==typeof e)try{e=e()}catch(t){console.error("ERROR: Can't execute function triggered by Sequencer:\n"+e.toString()),this.keysAndValues[i].splice(n,1),"function"!=typeof this.keysAndValues[i].pick&&this.counts[i]--}"function"==typeof this.target[i]?this.target[i](e):this.target[i]=e,this.counts[i]>=this.keysAndValues[i].length&&(this.counts[i]=0)}else"function"==typeof this.target[this.key]&&this.target[this.key]();if(this.phase-=this.nextTime,Array.isArray(this.durations)){var r="function"==typeof this.durations.pick?this.durations[this.durations.pick()]:this.durations[this.durationsIndex++];this.nextTime="function"==typeof r?r():r,this.durationsIndex>=this.durations.length&&(this.durationsIndex=0)}else{var r=this.durations;this.nextTime="function"==typeof r?r():r}return void(this.repeatTarget&&(this.repeatCount++,this.repeatCount===this.repeatTarget&&(this.isRunning=!1,this.repeatCount=0)))}this.phase++}},start:function(e){return e||(this.phase=this.offset),this.isRunning=!0,this},stop:function(){return this.isRunning=!1,this},repeat:function(e){return this.repeatTarget=e,this},shuffle:function(){for(e in this.keysAndValues)this.shuffleArray(this.keysAndValues[e])},shuffleArray:function(e){for(var t,i,n=e.length;n;t=parseInt(Math.random()*n),i=e[--n],e[n]=e[t],e[t]=i);},disconnect:function(){var e=Gibberish.sequencers.indexOf(this);Gibberish.sequencers.splice(e,1),this.isConnected=!1},connect:function(){return-1===Gibberish.sequencers.indexOf(this)&&Gibberish.sequencers.push(this),this.isConnected=!0,this}});for(var e in arguments[0])this[e]=arguments[0][e];for(var e in this.keysAndValues)this.counts[e]=0;this.connect(),this.phase+=this.offset},Gibberish.Sequencer.prototype=Gibberish._oscillator,Gibberish.PolySeq=function(){var e=this,t=0;Gibberish.extend(this,{seqs:[],timeline:{},playOnce:!1,repeatCount:0,repeatTarget:null,isConnected:!1,properties:{rate:1,isRunning:!1,nextTime:0},offset:0,name:"polyseq",getPhase:function(){return t},add:function(t){t.valuesIndex=t.durationsIndex=0,e.seqs.push(t),"undefined"!=typeof e.timeline[0]?e.timeline[0].push(t):e.timeline[0]=[t],!e.scale||"frequency"!==t.key&&"note"!==t.key||e.applyScale&&e.applyScale(),e.nextTime=0,t.shouldStop=!1},callback:function(i,n,r){var s;if(n){if(t>=r){var a=e.timeline[r],o=t-r;if("undefined"==typeof a)return;for(var h=0;h<a.length;h++){var u=a[h];if(!u.shouldStop){if(u.target){var c=u.values.pick?u.values.pick():u.valuesIndex++%u.values.length,l=u.values[c];"function"==typeof l&&(l=l()),"function"==typeof u.target[u.key]?u.target[u.key](l):u.target[u.key]=l}else"function"==typeof u.values[u.valuesIndex]&&u.values[u.valuesIndex++%u.values.length]();if(Array.isArray(u.durations)){var c=u.durations.pick?u.durations.pick():u.durationsIndex++,f=u.durations[c];s="function"==typeof f?f():f,u.durationsIndex>=u.durations.length&&(u.durationsIndex=0)}else{var f=u.durations;s="function"==typeof f?f():f}var b;b="undefined"!=typeof Gibber?Gibber.Clock.time(s)+t:s+t,b-=o,s-=o,"undefined"==typeof e.timeline[b]?e.timeline[b]=[u]:e.timeline[b].push(u)}}delete e.timeline[r];var p=Object.keys(e.timeline),d=p.length;if(d>1){for(var g=0;d>g;g++)p[g]=parseFloat(p[g]);p=p.sort(function(e,t){return t>e?-1:e>t?1:0}),e.nextTime=p[0]}else e.nextTime=parseFloat(p[0])}t+=i}return 0},start:function(e){if(!e){t=0,this.nextTime=0,this.timeline={0:[]};for(var i=0;i<this.seqs.length;i++){var n=this.seqs[i];n.valuesIndex=n.durationsIndex=n.shouldStop=0,this.timeline[0].push(n)}}return this.isConnected||(this.connect(),this.isConnected=!0),this.isRunning=!0,this},stop:function(){return this.isRunning=!1,this.isConnected&&(this.disconnect(),this.isConnected=!1),this},repeat:function(e){return this.repeatTarget=e,this},shuffle:function(){for(key in this.keysAndValues)this.shuffleArray(this.keysAndValues[key])},shuffleArray:function(e){for(var t,i,n=e.length;n;t=parseInt(Math.random()*n),i=e[--n],e[n]=e[t],e[t]=i);}}),this.init(arguments),this.processProperties(arguments),this.oscillatorInit()},Gibberish.PolySeq.prototype=Gibberish._oscillator;var _hasInput=!1;Gibberish.Input=function(){var e=[];_hasInput||createInput(),this.type=this.name="input",this.fx=new Array2,this.fx.parent=this,this.properties={input:"input",amp:.5,channels:1},this.callback=function(t,i,n){return 1===n?e=t*i:(e[0]=t[0]*i,e[1]=t[1]*i),e},this.init(arguments),this.processProperties(arguments)},Gibberish.Input.prototype=new Gibberish.ugen,Gibberish.Kick=function(){var e=!1,t=(new Gibberish.SVF).callback,i=(new Gibberish.SVF).callback,n=.2,r=.8;Gibberish.extend(this,{name:"kick",properties:{pitch:50,__decay:20,__tone:1e3,amp:2,sr:Gibberish.context.sampleRate},callback:function(n,r,s,a,o){var h=e?60:0;return h=t(h,n,r,2,o),h=i(h,s,.5,0,o),h*=a,e=!1,h},note:function(t,i,n,r){"number"==typeof t&&(this.pitch=t),"number"==typeof i&&(this.decay=i),"number"==typeof n&&(this.tone=n),"number"==typeof r&&(this.amp=r),e=!0}}).init().oscillatorInit(),Object.defineProperties(this,{decay:{get:function(){return n},set:function(e){n=e>1?1:e,this.__decay=100*n}},tone:{get:function(){return r},set:function(e){r=e>1?1:e,this.__tone=220+1400*e}}}),this.processProperties(arguments)},Gibberish.Kick.prototype=Gibberish._oscillator,Gibberish.Conga=function(){var e=!1,t=(new Gibberish.SVF).callback;Gibberish.extend(this,{name:"conga",properties:{pitch:190,amp:2,sr:Gibberish.context.sampleRate},callback:function(i,n,r){var s=e?60:0;return s=t(s,i,50,2,r),s*=n,e=!1,s},note:function(t,i){"number"==typeof t&&(this.pitch=t),"number"==typeof i&&(this.amp=i),e=!0}}).init().oscillatorInit(),this.processProperties(arguments)},Gibberish.Conga.prototype=Gibberish._oscillator,Gibberish.Clave=function(){var e=!1,t=new Gibberish.SVF,i=t.callback;Gibberish.extend(this,{name:"clave",properties:{pitch:2500,amp:1,sr:Gibberish.context.sampleRate},callback:function(t,n,r){var s=e?2:0;return s=i(s,t,5,2,r),s*=n,e=!1,s},note:function(t,i){"number"==typeof t&&(this.pitch=t),"number"==typeof i&&(this.amp=i),e=!0}}).init().oscillatorInit(),this.bpf=t,this.processProperties(arguments)},Gibberish.Clave.prototype=Gibberish._oscillator,Gibberish.Tom=function(){var e=!1,t=(new Gibberish.SVF).callback,i=(new Gibberish.SVF).callback,n=new Gibberish.ExponentialDecay,r=n.callback,s=Math.random;Gibberish.extend(this,{name:"tom",properties:{pitch:80,amp:.5,sr:Gibberish.context.sampleRate},callback:function(n,a,o){var h,u=e?60:0;return u=t(u,n,30,2,o),h=16*s()-8,h=h>0?h:0,h*=r(.05,11025),h=i(h,120,.5,0,o),u+=h,u*=a,e=!1,u},note:function(t,i){"number"==typeof t&&(this.pitch=t),"number"==typeof i&&(this.amp=i),n.trigger(),e=!0}}).init().oscillatorInit(),n.trigger(1),this.processProperties(arguments)},Gibberish.Tom.prototype=Gibberish._oscillator,Gibberish.Cowbell=function(){var e=new Gibberish.Square,t=new Gibberish.Square,i=e.callback,n=t.callback,r=new Gibberish.SVF({mode:2}),s=r.callback,a=new Gibberish.ExponentialDecay(.0025,10500),o=a.callback;Gibberish.extend(this,{name:"cowbell",properties:{amp:1,pitch:560,bpfFreq:1e3,bpfRez:3,decay:22050,decayCoeff:1e-4,sr:Gibberish.context.sampleRate},callback:function(e,t,r,a,h,u,c){var l;return l=i(t,1,1,0),l+=n(845,1,1,0),l=s(l,r,a,2,c),l*=o(u,h),l*=e},note:function(e){a.trigger(),e&&(this.decay=e)}}).init().oscillatorInit().processProperties(arguments),this.bpf=r,this.eg=a,a.trigger(1)},Gibberish.Cowbell.prototype=Gibberish._oscillator,Gibberish.Snare=function(){var e=(new Gibberish.SVF).callback,t=(new Gibberish.SVF).callback,i=(new Gibberish.SVF).callback,n=new Gibberish.ExponentialDecay(.0025,11025),r=n.callback,s=Math.random,a=0;Gibberish.extend(this,{name:"snare",properties:{cutoff:1e3,decay:11025,tune:0,snappy:.5,amp:1,sr:Gibberish.context.sampleRate},callback:function(n,o,h,u,c,l){var f,b,p=0,d=0;return p=r(.0025,o),p>.005&&(d=(2*s()-1)*p,d=i(d,n+1e3*h,.5,1,l),d*=u,d=d>0?d:0,a=p,f=e(a,180*(h+1),15,2,l),b=t(a,330*(h+1),15,2,l),d+=f,d+=.8*b,d*=c),d},note:function(e,t,i,r){"number"==typeof e&&(this.tune=e),"number"==typeof r&&(this.cutoff=r),"number"==typeof i&&(this.snappy=i),"number"==typeof t&&(this.amp=t),n.trigger()}}).init().oscillatorInit().processProperties(arguments),n.trigger(1)},Gibberish.Snare.prototype=Gibberish._oscillator,Gibberish.Hat=function(){var e=new Gibberish.Square,t=new Gibberish.Square,i=new Gibberish.Square,n=new Gibberish.Square,r=new Gibberish.Square,s=new Gibberish.Square,a=e.callback,o=t.callback,h=i.callback,u=n.callback,c=r.callback,l=s.callback,f=new Gibberish.SVF({mode:2}),b=f.callback,p=new Gibberish.Filter24,d=p.callback,g=new Gibberish.ExponentialDecay(.0025,10500),y=g.callback,m=new Gibberish.ExponentialDecay(.1,7500);m.callback,Gibberish.extend(this,{name:"hat",properties:{amp:1,pitch:325,bpfFreq:7e3,bpfRez:2,hpfFreq:.975,hpfRez:0,decay:3500,decay2:3e3,sr:Gibberish.context.sampleRate},callback:function(e,t,i,n,r,s,f,p,g){var m;return m=a(t,1,.5,0),m+=o(1.4471*t,.75,1,0),m+=h(1.617*t,1,1,0),m+=u(1.9265*t,1,1,0),m+=c(2.5028*t,1,1,0),m+=l(2.6637*t,.75,1,0),m=b(m,i,n,2,g),m*=y(.001,f),m=d(m,r,s,0,1),m*=e},note:function(e,t){g.trigger(),m.trigger(),e&&(this.decay=e),t&&(this.decay2=t)}}).init().oscillatorInit().processProperties(arguments),this.bpf=f,this.hpf=p,g.trigger(1),m.trigger(1)},Gibberish.Hat.prototype=Gibberish._oscillator},{}],3:[function(e,t){(function(i){"use strict";function n(e,t){return e[0]-t[0]}function r(){var e,t=this.stride,i=new Array(t.length);for(e=0;e<i.length;++e)i[e]=[Math.abs(t[e]),e];i.sort(n);var r=new Array(i.length);for(e=0;e<r.length;++e)r[e]=i[e][1];return r}function s(e,t){var i=["View",t,"d",e].join(""),n="generic"===e;if(0===t){var s=["function ",i,"(a,d) {this.data = a;this.offset = d};var proto=",i,".prototype;proto.dtype='",e,"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=proto.pick=function ",i,"_copy() {return new ",i,"(this.data,this.offset)};proto.get=function ",i,"_get(){return ",n?"this.data.get(this.offset)":"this.data[this.offset]","};proto.set=function ",i,"_set(v){return ",n?"this.data.get(this.offset)":"this.data[this.offset]","=v};return function construct_",i,"(a,b,c,d){return new ",i,"(a,d)}"].join(""),a=new Function(s);return a()}var s=["'use strict'"],o=h(t),l=o.map(function(e){return"i"+e}),f="this.offset+"+o.map(function(e){return["this._stride",e,"*i",e].join("")}).join("+");s.push(["function ",i,"(a,",o.map(function(e){return"b"+e}).join(","),",",o.map(function(e){return"c"+e}).join(","),",d){this.data=a"].join(""));for(var b=0;t>b;++b)s.push(["this._shape",b,"=b",b,"|0"].join(""));for(var b=0;t>b;++b)s.push(["this._stride",b,"=c",b,"|0"].join(""));s.push("this.offset=d|0}"),s.push(["var proto=",i,".prototype"].join("")),s.push(["proto.dtype='",e,"'"].join("")),s.push("proto.dimension="+t);var p=["VStride",t,"d",e].join(""),d=["VShape",t,"d",e].join(""),g={stride:p,shape:d};for(var y in g){var m=g[y];s.push(["function ",m,"(v) {this._v=v} var aproto=",m,".prototype"].join("")),s.push(["aproto.length=",t].join(""));for(var v=[],b=0;t>b;++b)v.push(["this._v._",y,b].join(""));s.push(["aproto.toJSON=function ",m,"_toJSON(){return [",v.join(","),"]}"].join("")),s.push(["aproto.toString=function ",m,"_toString(){return [",v.join(","),"].join()}"].join(""));for(var b=0;t>b;++b)s.push(["Object.defineProperty(aproto,",b,",{get:function(){return this._v._",y,b,"},set:function(v){return this._v._",y,b,"=v|0},enumerable:true})"].join(""));for(var b=0;b<u.length;++b)u[b]in Array.prototype&&s.push(["aproto.",u[b],"=Array.prototype.",u[b]].join(""));s.push(["Object.defineProperty(proto,'",y,"',{get:function ",m,"_get(){return new ",m,"(this)},set: function ",m,"_set(v){"].join(""));for(var b=0;t>b;++b)s.push(["this._",y,b,"=v[",b,"]|0"].join(""));s.push("return v}})")}s.push(["Object.defineProperty(proto,'size',{get:function ",i,"_size(){return ",o.map(function(e){return["this._shape",e].join("")}).join("*"),"}})"].join("")),1===t?s.push("proto.order=[0]"):(s.push("Object.defineProperty(proto,'order',{get:"),4>t?(s.push(["function ",i,"_order(){"].join("")),2===t?s.push("return (Math.abs(this._stride0)>Math.abs(this._stride1))?[1,0]:[0,1]}})"):3===t&&s.push("var s0=Math.abs(this._stride0),s1=Math.abs(this._stride1),s2=Math.abs(this._stride2);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):s.push("ORDER})")),s.push(["proto.set=function ",i,"_set(",l.join(","),",v){"].join("")),s.push(n?["return this.data.set(",f,",v)}"].join(""):["return this.data[",f,"]=v}"].join("")),s.push(["proto.get=function ",i,"_get(",l.join(","),"){"].join("")),s.push(n?["return this.data.get(",f,")}"].join(""):["return this.data[",f,"]}"].join("")),s.push(["proto.index=function ",i,"_index(",l.join(),"){return ",f,"}"].join("")),s.push(["proto.hi=function ",i,"_hi(",l.join(","),"){return new ",i,"(this.data,",o.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this._shape",e,":i",e,"|0"].join("")}).join(","),",",o.map(function(e){return"this._stride"+e}).join(","),",this.offset)}"].join(""));var G=o.map(function(e){return"a"+e+"=this._shape"+e}),w=o.map(function(e){return"c"+e+"=this._stride"+e});s.push(["proto.lo=function ",i,"_lo(",l.join(","),"){var b=this.offset,d=0,",G.join(","),",",w.join(",")].join(""));for(var b=0;t>b;++b)s.push(["if(typeof i",b,"==='number'&&i",b,">=0){d=i",b,"|0;b+=c",b,"*d;a",b,"-=d}"].join(""));s.push(["return new ",i,"(this.data,",o.map(function(e){return"a"+e}).join(","),",",o.map(function(e){return"c"+e}).join(","),",b)}"].join("")),s.push(["proto.step=function ",i,"_step(",l.join(","),"){var ",o.map(function(e){return"a"+e+"=this._shape"+e}).join(","),",",o.map(function(e){return"b"+e+"=this._stride"+e}).join(","),",c=this.offset,d=0,ceil=Math.ceil"].join(""));for(var b=0;t>b;++b)s.push(["if(typeof i",b,"==='number'){d=i",b,"|0;if(d<0){c+=b",b,"*(a",b,"-1);a",b,"=ceil(-a",b,"/d)}else{a",b,"=ceil(a",b,"/d)}b",b,"*=d}"].join(""));s.push(["return new ",i,"(this.data,",o.map(function(e){return"a"+e}).join(","),",",o.map(function(e){return"b"+e}).join(","),",c)}"].join(""));for(var k=new Array(t),x=new Array(t),b=0;t>b;++b)k[b]=["a[i",b,"|0]"].join(""),x[b]=["b[i",b,"|0]"].join("");s.push(["proto.transpose=function ",i,"_transpose(",l,"){var a=this.shape,b=this.stride;return new ",i,"(this.data,",k.join(","),",",x.join(","),",this.offset)}"].join("")),s.push(["proto.pick=function ",i,"_pick(",l,"){var a=[],b=[],c=this.offset"].join(""));for(var b=0;t>b;++b)s.push(["if(typeof i",b,"==='number'&&i",b,">=0){c=(c+this._stride",b,"*i",b,")|0}else{a.push(this._shape",b,");b.push(this._stride",b,")}"].join(""));s.push("var ctor=CTOR_LIST[a.length];return ctor(this.data,a,b,c)}"),s.push(["return function construct_",i,"(data,shape,stride,offset){return new ",i,"(data,",o.map(function(e){return"shape["+e+"]"}).join(","),",",o.map(function(e){return"stride["+e+"]"}).join(","),",offset)}"].join(""));var a=new Function("CTOR_LIST","ORDER",s.join("\n"));return a(c[e],r)}function a(e){return e instanceof Float64Array?"float64":e instanceof Float32Array?"float32":e instanceof Int32Array?"int32":e instanceof Uint32Array?"uint32":e instanceof Uint8Array?"uint8":e instanceof Uint16Array?"uint16":e instanceof Int16Array?"int16":e instanceof Int8Array?"int8":e instanceof Uint8ClampedArray?"uint8_clamped":"undefined"!=typeof i&&e instanceof i?"buffer":e instanceof Array?"array":"generic"}function o(e,t,i,n){void 0===t&&(t=[e.length]);var r=t.length;if(void 0===i){i=new Array(r);for(var o=r-1,h=1;o>=0;--o)i[o]=h,h*=t[o]}if(void 0===n){n=0;for(var o=0;r>o;++o)i[o]<0&&(n-=(t[o]-1)*i[o])}for(var u=a(e),l=c[u];l.length<=r;)l.push(s(u,l.length));var f=l[r];return f(e,t,i,n)}var h=e("iota-array"),u=["concat","join","slice","toString","indexOf","lastIndexOf","forEach","every","some","filter","map","reduce","reduceRight"],c={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};t.exports=o}).call(this,e("buffer").Buffer)},{buffer:7,"iota-array":4}],4:[function(e,t){"use strict";function i(e){for(var t=new Array(e),i=0;e>i;++i)t[i]=i;return t}t.exports=i},{}],5:[function(e,t){!function(e,t,i,n,r,s,a,o,h){function u(e){var t,i=e.length,r=this,s=0,a=r.i=r.j=0,o=r.S=[];for(i||(e=[i++]);n>s;)o[s]=s++;for(s=0;n>s;s++)o[s]=o[a=y&a+e[s%i]+(t=o[s])],o[a]=t;(r.g=function(e){for(var t,i=0,s=r.i,a=r.j,o=r.S;e--;)t=o[s=y&s+1],i=i*n+o[y&(o[s]=o[a=y&a+t])+(o[a]=t)];return r.i=s,r.j=a,i})(n)}function c(e,t){var i,n=[],r=typeof e;if(t&&"object"==r)for(i in e)try{n.push(c(e[i],t-1))}catch(s){}return n.length?n:"string"==r?e:e+"\x00"}function l(e,t){for(var i,n=e+"",r=0;r<n.length;)t[y&r]=y&(i^=19*t[y&r])+n.charCodeAt(r++);return b(t)}function f(i){try{return e.crypto.getRandomValues(i=new Uint8Array(n)),b(i)}catch(r){return[+new Date,e,(i=e.navigator)&&i.plugins,e.screen,b(t)]}}function b(e){return String.fromCharCode.apply(0,e)}var p=i.pow(n,r),d=i.pow(2,s),g=2*d,y=n-1,m=i["seed"+h]=function(e,s,a){var o=[],y=l(c(s?[e,b(t)]:null==e?f():e,3),o),m=new u(o);return l(b(m.S),t),(a||function(e,t,n){return n?(i[h]=e,t):e})(function(){for(var e=m.g(r),t=p,i=0;d>e;)e=(e+i)*n,t*=n,i=m.g(1);for(;e>=g;)e/=2,t/=2,i>>>=1;return(e+i)/t},y,this==i)};l(i[h](),t),a&&a.exports?a.exports=m:o&&o.amd&&o(function(){return m})}(this,[],Math,256,6,52,"object"==typeof t&&t,"function"==typeof define&&define,"random")},{}],6:[function(e,t){"use strict";var i=e("ndarray");t.exports=function(e){for(var t=1,n=0;n<e.length;++n)t*=e[n];return i(new Float64Array(t),e)}},{ndarray:3}],7:[function(e,t,i){function n(e,t,i){if(!(this instanceof n))return new n(e,t,i);var r=typeof e;if("base64"===t&&"string"===r)for(e=j(e);e.length%4!==0;)e+="=";var s;if("number"===r)s=R(e);else if("string"===r)s=n.byteLength(e,t);else{if("object"!==r)throw new Error("First argument needs to be a number, array or string.");s=R(e.length)}var a;n._useTypedArrays?a=P(new Uint8Array(s)):(a=this,a.length=s,a._isBuffer=!0);var o;if(n._useTypedArrays&&"function"==typeof Uint8Array&&e instanceof Uint8Array)a._set(e);else if(T(e))for(o=0;s>o;o++)a[o]=n.isBuffer(e)?e.readUInt8(o):e[o];else if("string"===r)a.write(e,0,t);else if("number"===r&&!n._useTypedArrays&&!i)for(o=0;s>o;o++)a[o]=0;return a}function r(e,t,i,r){i=Number(i)||0;var s=e.length-i;r?(r=Number(r),r>s&&(r=s)):r=s;var a=t.length;z(a%2===0,"Invalid hex string"),r>a/2&&(r=a/2);for(var o=0;r>o;o++){var h=parseInt(t.substr(2*o,2),16);z(!isNaN(h),"Invalid hex string"),e[i+o]=h}return n._charsWritten=2*o,o}function s(e,t,i,r){var s=n._charsWritten=B(q(t),e,i,r);return s}function a(e,t,i,r){var s=n._charsWritten=B(O(t),e,i,r);return s}function o(e,t,i,n){return a(e,t,i,n)}function h(e,t,i,r){var s=n._charsWritten=B(L(t),e,i,r);return s}function u(e,t,i,r){var s=n._charsWritten=B(D(t),e,i,r);return s}function c(e,t,i){return W.fromByteArray(0===t&&i===e.length?e:e.slice(t,i))}function l(e,t,i){var n="",r="";i=Math.min(e.length,i);for(var s=t;i>s;s++)e[s]<=127?(n+=F(r)+String.fromCharCode(e[s]),r=""):r+="%"+e[s].toString(16);return n+F(r)}function f(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;i>r;r++)n+=String.fromCharCode(e[r]);return n}function b(e,t,i){return f(e,t,i)}function p(e,t,i){var n=e.length;(!t||0>t)&&(t=0),(!i||0>i||i>n)&&(i=n);for(var r="",s=t;i>s;s++)r+=E(e[s]);return r}function d(e,t,i){for(var n=e.slice(t,i),r="",s=0;s<n.length;s+=2)r+=String.fromCharCode(n[s]+256*n[s+1]);return r}function g(e,t,i,n){n||(z("boolean"==typeof i,"missing or invalid endian"),z(void 0!==t&&null!==t,"missing offset"),z(t+1<e.length,"Trying to read beyond buffer length"));var r=e.length;if(!(t>=r)){var s;return i?(s=e[t],r>t+1&&(s|=e[t+1]<<8)):(s=e[t]<<8,r>t+1&&(s|=e[t+1])),s}}function y(e,t,i,n){n||(z("boolean"==typeof i,"missing or invalid endian"),z(void 0!==t&&null!==t,"missing offset"),z(t+3<e.length,"Trying to read beyond buffer length"));var r=e.length;if(!(t>=r)){var s;return i?(r>t+2&&(s=e[t+2]<<16),r>t+1&&(s|=e[t+1]<<8),s|=e[t],r>t+3&&(s+=e[t+3]<<24>>>0)):(r>t+1&&(s=e[t+1]<<16),r>t+2&&(s|=e[t+2]<<8),r>t+3&&(s|=e[t+3]),s+=e[t]<<24>>>0),s}}function m(e,t,i,n){n||(z("boolean"==typeof i,"missing or invalid endian"),z(void 0!==t&&null!==t,"missing offset"),z(t+1<e.length,"Trying to read beyond buffer length"));var r=e.length;if(!(t>=r)){var s=g(e,t,i,!0),a=32768&s;return a?-1*(65535-s+1):s}}function v(e,t,i,n){n||(z("boolean"==typeof i,"missing or invalid endian"),z(void 0!==t&&null!==t,"missing offset"),z(t+3<e.length,"Trying to read beyond buffer length"));var r=e.length;if(!(t>=r)){var s=y(e,t,i,!0),a=2147483648&s;return a?-1*(4294967295-s+1):s}}function G(e,t,i,n){return n||(z("boolean"==typeof i,"missing or invalid endian"),z(t+3<e.length,"Trying to read beyond buffer length")),H.read(e,t,i,23,4)}function w(e,t,i,n){return n||(z("boolean"==typeof i,"missing or invalid endian"),z(t+7<e.length,"Trying to read beyond buffer length")),H.read(e,t,i,52,8)}function k(e,t,i,n,r){r||(z(void 0!==t&&null!==t,"missing value"),z("boolean"==typeof n,"missing or invalid endian"),z(void 0!==i&&null!==i,"missing offset"),z(i+1<e.length,"trying to write beyond buffer length"),U(t,65535));var s=e.length;if(!(i>=s))for(var a=0,o=Math.min(s-i,2);o>a;a++)e[i+a]=(t&255<<8*(n?a:1-a))>>>8*(n?a:1-a)}function x(e,t,i,n,r){r||(z(void 0!==t&&null!==t,"missing value"),z("boolean"==typeof n,"missing or invalid endian"),z(void 0!==i&&null!==i,"missing offset"),z(i+3<e.length,"trying to write beyond buffer length"),U(t,4294967295));var s=e.length;if(!(i>=s))for(var a=0,o=Math.min(s-i,4);o>a;a++)e[i+a]=t>>>8*(n?a:3-a)&255}function _(e,t,i,n,r){r||(z(void 0!==t&&null!==t,"missing value"),z("boolean"==typeof n,"missing or invalid endian"),z(void 0!==i&&null!==i,"missing offset"),z(i+1<e.length,"Trying to write beyond buffer length"),V(t,32767,-32768));var s=e.length;i>=s||(t>=0?k(e,t,i,n,r):k(e,65535+t+1,i,n,r))}function A(e,t,i,n,r){r||(z(void 0!==t&&null!==t,"missing value"),z("boolean"==typeof n,"missing or invalid endian"),z(void 0!==i&&null!==i,"missing offset"),z(i+3<e.length,"Trying to write beyond buffer length"),V(t,2147483647,-2147483648));var s=e.length;i>=s||(t>=0?x(e,t,i,n,r):x(e,4294967295+t+1,i,n,r))}function S(e,t,i,n,r){r||(z(void 0!==t&&null!==t,"missing value"),z("boolean"==typeof n,"missing or invalid endian"),z(void 0!==i&&null!==i,"missing offset"),z(i+3<e.length,"Trying to write beyond buffer length"),N(t,3.4028234663852886e38,-3.4028234663852886e38));var s=e.length;i>=s||H.write(e,t,i,n,23,4)}function I(e,t,i,n,r){r||(z(void 0!==t&&null!==t,"missing value"),z("boolean"==typeof n,"missing or invalid endian"),z(void 0!==i&&null!==i,"missing offset"),z(i+7<e.length,"Trying to write beyond buffer length"),N(t,1.7976931348623157e308,-1.7976931348623157e308));var s=e.length;i>=s||H.write(e,t,i,n,52,8)}function j(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function P(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=K.get,e.set=K.set,e.write=K.write,e.toString=K.toString,e.toLocaleString=K.toString,e.toJSON=K.toJSON,e.copy=K.copy,e.slice=K.slice,e.readUInt8=K.readUInt8,e.readUInt16LE=K.readUInt16LE,e.readUInt16BE=K.readUInt16BE,e.readUInt32LE=K.readUInt32LE,e.readUInt32BE=K.readUInt32BE,e.readInt8=K.readInt8,e.readInt16LE=K.readInt16LE,e.readInt16BE=K.readInt16BE,e.readInt32LE=K.readInt32LE,e.readInt32BE=K.readInt32BE,e.readFloatLE=K.readFloatLE,e.readFloatBE=K.readFloatBE,e.readDoubleLE=K.readDoubleLE,e.readDoubleBE=K.readDoubleBE,e.writeUInt8=K.writeUInt8,e.writeUInt16LE=K.writeUInt16LE,e.writeUInt16BE=K.writeUInt16BE,e.writeUInt32LE=K.writeUInt32LE,e.writeUInt32BE=K.writeUInt32BE,e.writeInt8=K.writeInt8,e.writeInt16LE=K.writeInt16LE,e.writeInt16BE=K.writeInt16BE,e.writeInt32LE=K.writeInt32LE,e.writeInt32BE=K.writeInt32BE,e.writeFloatLE=K.writeFloatLE,e.writeFloatBE=K.writeFloatBE,e.writeDoubleLE=K.writeDoubleLE,e.writeDoubleBE=K.writeDoubleBE,e.fill=K.fill,e.inspect=K.inspect,e.toArrayBuffer=K.toArrayBuffer,e}function C(e,t,i){return"number"!=typeof e?i:(e=~~e,e>=t?t:e>=0?e:(e+=t,e>=0?e:0))}function R(e){return e=~~Math.ceil(+e),0>e?0:e}function M(e){return(Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)}function T(e){return M(e)||n.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function E(e){return 16>e?"0"+e.toString(16):e.toString(16)}function q(e){for(var t=[],i=0;i<e.length;i++){var n=e.charCodeAt(i);if(127>=n)t.push(e.charCodeAt(i));else{var r=i;n>=55296&&57343>=n&&i++;for(var s=encodeURIComponent(e.slice(r,i+1)).substr(1).split("%"),a=0;a<s.length;a++)t.push(parseInt(s[a],16))}}return t}function O(e){for(var t=[],i=0;i<e.length;i++)t.push(255&e.charCodeAt(i));return t}function D(e){for(var t,i,n,r=[],s=0;s<e.length;s++)t=e.charCodeAt(s),i=t>>8,n=t%256,r.push(n),r.push(i);return r}function L(e){return W.toByteArray(e)}function B(e,t,i,n){for(var r=0;n>r&&!(r+i>=t.length||r>=e.length);r++)t[r+i]=e[r];return r}function F(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}function U(e,t){z("number"==typeof e,"cannot write a non-number as a number"),z(e>=0,"specified a negative value for writing an unsigned value"),z(t>=e,"value is larger than maximum value for type"),z(Math.floor(e)===e,"value has a fractional component")}function V(e,t,i){z("number"==typeof e,"cannot write a non-number as a number"),z(t>=e,"value larger than maximum allowed value"),z(e>=i,"value smaller than minimum allowed value"),z(Math.floor(e)===e,"value has a fractional component")}function N(e,t,i){z("number"==typeof e,"cannot write a non-number as a number"),z(t>=e,"value larger than maximum allowed value"),z(e>=i,"value smaller than minimum allowed value")}function z(e,t){if(!e)throw new Error(t||"Failed assertion")}var W=e("base64-js"),H=e("ieee754");i.Buffer=n,i.SlowBuffer=n,i.INSPECT_MAX_BYTES=50,n.poolSize=8192,n._useTypedArrays=function(){if("function"!=typeof Uint8Array||"function"!=typeof ArrayBuffer)return!1;try{var e=new Uint8Array(0);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray}catch(t){return!1}}(),n.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.isBuffer=function(e){return!(null===e||void 0===e||!e._isBuffer)},n.byteLength=function(e,t){var i;switch(e+="",t||"utf8"){case"hex":i=e.length/2;break;case"utf8":case"utf-8":i=q(e).length;break;case"ascii":case"binary":case"raw":i=e.length;break;case"base64":i=L(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":i=2*e.length;break;default:throw new Error("Unknown encoding")}return i},n.concat=function(e,t){if(z(M(e),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===e.length)return new n(0);if(1===e.length)return e[0];var i;if("number"!=typeof t)for(t=0,i=0;i<e.length;i++)t+=e[i].length;var r=new n(t),s=0;for(i=0;i<e.length;i++){var a=e[i];a.copy(r,s),s+=a.length}return r},n.prototype.write=function(e,t,i,n){if(isFinite(t))isFinite(i)||(n=i,i=void 0);else{var c=n;n=t,t=i,i=c}t=Number(t)||0;var l=this.length-t;i?(i=Number(i),i>l&&(i=l)):i=l,n=String(n||"utf8").toLowerCase();var f;switch(n){case"hex":f=r(this,e,t,i);break;case"utf8":case"utf-8":f=s(this,e,t,i);break;case"ascii":f=a(this,e,t,i);break;case"binary":f=o(this,e,t,i);break;case"base64":f=h(this,e,t,i);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":f=u(this,e,t,i);break;default:throw new Error("Unknown encoding")}return f},n.prototype.toString=function(e,t,i){var n=this;if(e=String(e||"utf8").toLowerCase(),t=Number(t)||0,i=void 0!==i?Number(i):i=n.length,i===t)return"";var r;switch(e){case"hex":r=p(n,t,i);break;case"utf8":case"utf-8":r=l(n,t,i);break;case"ascii":r=f(n,t,i);break;case"binary":r=b(n,t,i);break;case"base64":r=c(n,t,i);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=d(n,t,i);break;default:throw new Error("Unknown encoding")}return r},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},n.prototype.copy=function(e,t,i,n){var r=this;if(i||(i=0),n||0===n||(n=this.length),t||(t=0),n!==i&&0!==e.length&&0!==r.length){z(n>=i,"sourceEnd < sourceStart"),z(t>=0&&t<e.length,"targetStart out of bounds"),z(i>=0&&i<r.length,"sourceStart out of bounds"),z(n>=0&&n<=r.length,"sourceEnd out of bounds"),n>this.length&&(n=this.length),e.length-t<n-i&&(n=e.length-t+i);for(var s=0;n-i>s;s++)e[s+t]=this[s+i]}},n.prototype.slice=function(e,t){var i=this.length;if(e=C(e,i,0),t=C(t,i,i),n._useTypedArrays)return P(this.subarray(e,t));for(var r=t-e,s=new n(r,void 0,!0),a=0;r>a;a++)s[a]=this[a+e];return s},n.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},n.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},n.prototype.readUInt8=function(e,t){return t||(z(void 0!==e&&null!==e,"missing offset"),z(e<this.length,"Trying to read beyond buffer length")),e>=this.length?void 0:this[e]},n.prototype.readUInt16LE=function(e,t){return g(this,e,!0,t)},n.prototype.readUInt16BE=function(e,t){return g(this,e,!1,t)},n.prototype.readUInt32LE=function(e,t){return y(this,e,!0,t)},n.prototype.readUInt32BE=function(e,t){return y(this,e,!1,t)},n.prototype.readInt8=function(e,t){if(t||(z(void 0!==e&&null!==e,"missing offset"),z(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length)){var i=128&this[e];return i?-1*(255-this[e]+1):this[e]}},n.prototype.readInt16LE=function(e,t){return m(this,e,!0,t)},n.prototype.readInt16BE=function(e,t){return m(this,e,!1,t)},n.prototype.readInt32LE=function(e,t){return v(this,e,!0,t)},n.prototype.readInt32BE=function(e,t){return v(this,e,!1,t)},n.prototype.readFloatLE=function(e,t){return G(this,e,!0,t)},n.prototype.readFloatBE=function(e,t){return G(this,e,!1,t)},n.prototype.readDoubleLE=function(e,t){return w(this,e,!0,t)},n.prototype.readDoubleBE=function(e,t){return w(this,e,!1,t)},n.prototype.writeUInt8=function(e,t,i){i||(z(void 0!==e&&null!==e,"missing value"),z(void 0!==t&&null!==t,"missing offset"),z(t<this.length,"trying to write beyond buffer length"),U(e,255)),t>=this.length||(this[t]=e)},n.prototype.writeUInt16LE=function(e,t,i){k(this,e,t,!0,i)},n.prototype.writeUInt16BE=function(e,t,i){k(this,e,t,!1,i)},n.prototype.writeUInt32LE=function(e,t,i){x(this,e,t,!0,i)},n.prototype.writeUInt32BE=function(e,t,i){x(this,e,t,!1,i)},n.prototype.writeInt8=function(e,t,i){i||(z(void 0!==e&&null!==e,"missing value"),z(void 0!==t&&null!==t,"missing offset"),z(t<this.length,"Trying to write beyond buffer length"),V(e,127,-128)),t>=this.length||(e>=0?this.writeUInt8(e,t,i):this.writeUInt8(255+e+1,t,i))},n.prototype.writeInt16LE=function(e,t,i){_(this,e,t,!0,i)},n.prototype.writeInt16BE=function(e,t,i){_(this,e,t,!1,i)},n.prototype.writeInt32LE=function(e,t,i){A(this,e,t,!0,i)},n.prototype.writeInt32BE=function(e,t,i){A(this,e,t,!1,i)},n.prototype.writeFloatLE=function(e,t,i){S(this,e,t,!0,i)},n.prototype.writeFloatBE=function(e,t,i){S(this,e,t,!1,i)},n.prototype.writeDoubleLE=function(e,t,i){I(this,e,t,!0,i)},n.prototype.writeDoubleBE=function(e,t,i){I(this,e,t,!1,i)},n.prototype.fill=function(e,t,i){if(e||(e=0),t||(t=0),i||(i=this.length),"string"==typeof e&&(e=e.charCodeAt(0)),z("number"==typeof e&&!isNaN(e),"value is not a number"),z(i>=t,"end < start"),i!==t&&0!==this.length){z(t>=0&&t<this.length,"start out of bounds"),z(i>=0&&i<=this.length,"end out of bounds");for(var n=t;i>n;n++)this[n]=e}},n.prototype.inspect=function(){for(var e=[],t=this.length,n=0;t>n;n++)if(e[n]=E(this[n]),n===i.INSPECT_MAX_BYTES){e[n+1]="...";break}return"<Buffer "+e.join(" ")+">"},n.prototype.toArrayBuffer=function(){if("function"==typeof Uint8Array){if(n._useTypedArrays)return new n(this).buffer;
for(var e=new Uint8Array(this.length),t=0,i=e.length;i>t;t+=1)e[t]=this[t];return e.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var K=n.prototype},{"base64-js":8,ieee754:9}],8:[function(e,t){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(){"use strict";function e(e){var t=e.charCodeAt(0);return t===a?62:t===o?63:h>t?-1:h+10>t?t-h+26+26:c+26>t?t-c:u+26>t?t-u+26:void 0}function n(t){function i(e){u[l++]=e}var n,r,a,o,h,u;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=t.length;h="="===t.charAt(c-2)?2:"="===t.charAt(c-1)?1:0,u=new s(3*t.length/4-h),a=h>0?t.length-4:t.length;var l=0;for(n=0,r=0;a>n;n+=4,r+=3)o=e(t.charAt(n))<<18|e(t.charAt(n+1))<<12|e(t.charAt(n+2))<<6|e(t.charAt(n+3)),i((16711680&o)>>16),i((65280&o)>>8),i(255&o);return 2===h?(o=e(t.charAt(n))<<2|e(t.charAt(n+1))>>4,i(255&o)):1===h&&(o=e(t.charAt(n))<<10|e(t.charAt(n+1))<<4|e(t.charAt(n+2))>>2,i(o>>8&255),i(255&o)),u}function r(e){function t(e){return i.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var r,s,a,o=e.length%3,h="";for(r=0,a=e.length-o;a>r;r+=3)s=(e[r]<<16)+(e[r+1]<<8)+e[r+2],h+=n(s);switch(o){case 1:s=e[e.length-1],h+=t(s>>2),h+=t(s<<4&63),h+="==";break;case 2:s=(e[e.length-2]<<8)+e[e.length-1],h+=t(s>>10),h+=t(s>>4&63),h+=t(s<<2&63),h+="="}return h}var s="undefined"!=typeof Uint8Array?Uint8Array:Array,a=("0".charCodeAt(0),"+".charCodeAt(0)),o="/".charCodeAt(0),h="0".charCodeAt(0),u="a".charCodeAt(0),c="A".charCodeAt(0);t.exports.toByteArray=n,t.exports.fromByteArray=r}()},{}],9:[function(e,t,i){i.read=function(e,t,i,n,r){var s,a,o=8*r-n-1,h=(1<<o)-1,u=h>>1,c=-7,l=i?r-1:0,f=i?-1:1,b=e[t+l];for(l+=f,s=b&(1<<-c)-1,b>>=-c,c+=o;c>0;s=256*s+e[t+l],l+=f,c-=8);for(a=s&(1<<-c)-1,s>>=-c,c+=n;c>0;a=256*a+e[t+l],l+=f,c-=8);if(0===s)s=1-u;else{if(s===h)return a?0/0:1/0*(b?-1:1);a+=Math.pow(2,n),s-=u}return(b?-1:1)*a*Math.pow(2,s-n)},i.write=function(e,t,i,n,r,s){var a,o,h,u=8*s-r-1,c=(1<<u)-1,l=c>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,b=n?0:s-1,p=n?1:-1,d=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||1/0===t?(o=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-a))<1&&(a--,h*=2),t+=a+l>=1?f/h:f*Math.pow(2,1-l),t*h>=2&&(a++,h/=2),a+l>=c?(o=0,a=c):a+l>=1?(o=(t*h-1)*Math.pow(2,r),a+=l):(o=t*Math.pow(2,l-1)*Math.pow(2,r),a=0));r>=8;e[i+b]=255&o,b+=p,o/=256,r-=8);for(a=a<<r|o,u+=r;u>0;e[i+b]=255&a,b+=p,a/=256,u-=8);e[i+b-p]|=128*d}},{}]},{},[2,1]);